{"version":3,"file":"main.js","mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtCA","sources":["./src/app/_guards/auth.guard.ts","./src/app/_guards/diagnostic.guard.ts","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/auth/auth.service.ts","./src/app/auth/error.interceptor.ts","./src/app/auth/jwt.interceptor.ts","./src/app/call.service.ts","./src/app/config.service.ts","./src/app/consultation.service.ts","./src/app/global-variable.service.ts","./src/app/i18n/i18n.module.ts","./src/app/shared/components/chat/chat.component.ts","./src/app/shared/components/choose-attachment/choose-attachment.component.ts","./src/app/shared/components/close-consultation/close-consultation.component.ts","./src/app/shared/components/request-consultation/request-consultation.component.ts","./src/app/shared/components/stream/peer-audio/peer-audio.component.ts","./src/app/shared/components/stream/peer-video/peer-video.component.ts","./src/app/shared/layout/openvidu-layout.ts","./src/app/shared/services/openvidu.service.ts","./src/app/shared/shared.module.ts","./src/app/socket-events.service.ts","./src/app/video-room/video-room.module.ts","./src/app/video-room/video-room.page.ts","./src/environments/environment.ts","./src/main.ts","./node_modules/@ionic/core/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","./node_modules/@ionic/pwa-elements/dist/esm/ lazy ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$ exclude: \\.system\\.entry\\.js$ namespace object","ignored|/home/olivierb/Developments/iabsis/hcw/patient/node_modules/engine.io-client/lib/transports|ws"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\n\nimport { AuthService } from '../auth/auth.service';\n\n@Injectable({ providedIn: 'root' })\n\nexport class AuthGuard implements CanActivate {\n    constructor(\n        private router: Router,\n        private authService: AuthService\n    ) { }\n\n    canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        const currentUser = this.authService.currentUserValue;\n        console.log('current user ', currentUser)\n        if (currentUser) {\n            // logged in so return true\n            return true;\n        }\n\n        // not logged in so redirect to login page with the return url\n        this.router.navigate(['/login'], { queryParams: { returnUrl: state.url } });\n        return false;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { Observable } from 'rxjs';\n\n/**\n * The diagnostic guard tests the browser support for WebRTC.\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class DiagnosticGuard implements CanActivate {\n\n  constructor(private router: Router) {}\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n    if (!this.hasWebRtcSupport()) {\n      return this.router.parseUrl('/diagnostic');\n    }\n    return true;\n  }\n  \n  /**\n   * Tests whether the browser supports WebRTC or not.\n   * \n   * @returns {boolean}\n   */\n  hasWebRtcSupport(): boolean {\n    return Boolean(\n      (window as any).RTCPeerConnection\n      || (window as any).webkitRTCPeerConnection\n      || (window as any).mozRTCPeerConnection\n      || (window as any).RTCIceGatherer\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AuthGuard } from './_guards/auth.guard';\nimport { DiagnosticGuard } from './_guards/diagnostic.guard';\n\n/**\n * Routes\n *\n * AuthGuard is used to redirect unauthentified patients.\n * DiagnosticGuard is used to redirect unsupported browsers.\n */\nconst routes: Routes = [\n  // { path: '', redirectTo: 'login', pathMatch: 'full' },\n  { path: 'diagnostic', loadChildren: () => import('./diagnostic/diagnostic.module').then(m => m.DiagnosticPageModule) },\n  { path: 'test-call', loadChildren: () => import('./test/test.module').then(m => m.TestModule) },\n  // { path: 'video/:roomName', loadChildren: './video-room/video-room.module#VideoRoomPageModule' ,canActivate: [DiagnosticGuard, AuthGuard]},\n  { path: 'info', loadChildren: () => import('./info/info.module').then(m => m.InfoPageModule), canActivate: [DiagnosticGuard, AuthGuard] },\n  { path: 'history', loadChildren: () => import('./consultations/consultations.module').then(m => m.ConsultationsPageModule), data: { title: '', status: 'closed' }, canActivate: [DiagnosticGuard, AuthGuard] },\n  { path: 'consultation/:id', loadChildren: () => import('./consultation/consultation.module').then(m => m.ConsultationPageModule), canActivate: [DiagnosticGuard, AuthGuard] },\n  { path: 'pending-active', loadChildren: () => import('./consultations/consultations.module').then(m => m.ConsultationsPageModule), data: { title: '', status: 'pending|active' }, canActivate: [DiagnosticGuard, AuthGuard] },\n  { path: 'incommingCall', loadChildren: () => import('./incomming-call/incomming-call.module').then(m => m.IncommingCallPageModule), canActivate: [DiagnosticGuard, AuthGuard] },\n  { path: 'login', loadChildren: () => import('./login/login.module').then(m => m.LoginPageModule), canActivate: [DiagnosticGuard] },\n  { path: 'closing-screen/:id', loadChildren: () => import('./closing-screen/closing-screen.module').then(m => m.ClosingScreenPageModule) },\n  { path: 'cgu', loadChildren: () => import('./cgu/cgu.module').then(m => m.CguPageModule) },\n  { path: 'await-consultation', loadChildren: () => import('./await-consultation/await-consultation.module').then(m => m.AwaitConsultationPageModule) },\n  { path: 'translation/:id', loadChildren: () => import('./translation/translation.module').then(m => m.TranslationPageModule) },\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { useHash: true, relativeLinkResolution: 'legacy' })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Observable, Subscription } from \"rxjs\";\nimport { GlobalVariableService } from \"./global-variable.service\";\nimport { Component, OnInit, NgZone, Directive } from \"@angular/core\";\n\nimport { Platform, NavController } from \"@ionic/angular\";\n\n// import { SplashScreen } from \"@awesome-cordova-plugins/splash-screen/ngx\";\nimport { SplashScreen } from '@capacitor/splash-screen';\n\nimport { CallService } from \"./call.service\";\n\nimport { SocketEventsService } from \"./socket-events.service\";\nimport { ConsultationService } from \"./consultation.service\";\n\nimport { AuthService } from \"./auth/auth.service\";\n// import { NativeAudio } from \"@awesome-cordova-plugins/native-audio/ngx\";\nimport { NativeAudio } from '@capacitor-community/native-audio'\n\n\nimport { NavigationEnd, Router } from \"@angular/router\";\n\ndeclare var cordova;\ndeclare let window: any;\nimport { File } from \"@awesome-cordova-plugins/file/ngx\";\nimport { App, URLOpenListenerEvent } from '@capacitor/app';\nimport { LoginPage } from \"./login/login.page\";\nimport { TestComponent } from \"./test/test.component\";\nimport { filter } from \"rxjs/operators\";\nimport { environment } from \"../environments/environment\";\nimport { Browser } from '@capacitor/browser';\n\n@Component({\n  selector: \"app-root\",\n  templateUrl: \"app.component.html\",\n  styleUrls: [\"./app.component.scss\"],\n})\nexport class AppComponent {\n  callRunning = false;\n  currentUser;\n  redirected = false;\n  consultation;\n  callsSub: Subscription;\n  inviteToken: string;\n\n  testRoute = false;\n  constructor(\n    private platform: Platform,\n    // private splashScreen: SplashScreen,\n    private callService: CallService,\n    private authService: AuthService,\n    private socketEventsService: SocketEventsService,\n    private consultationService: ConsultationService,\n    private zone: NgZone,\n    // private nativeAudio: NativeAudio,\n    private file: File,\n    private router: Router,\n    public globalVariableService: GlobalVariableService\n  ) {\n    \n    const parsedUrl = new URL(window.location.href);\n    console.log(\"PARSED URL\", parsedUrl);\n    this.inviteToken = parsedUrl.searchParams.get(\"invite\");\n    if (!this.inviteToken && window.location.href.match(/invite=([^&]*)/)) {\n      // parse invite from url using regex\n      this.inviteToken = window.location.href.match(/invite=([^&]*)/)[1];\n    }\n    this.testRoute = window.location.href.includes(\"test-call\");\n\n    router.events\n      .pipe(filter((event) => event instanceof NavigationEnd))\n      .subscribe((event) => {\n        console.log(\"Router event\", event);\n      });\n  }\n\n\n  ngOnInit() {\n\n    this.authService\n      .init()\n      .then((user) => {\n        if (user) {\n          this.currentUser = user;\n          this.initServices(this.currentUser);\n        }\n        this.initializeApp();\n      })\n      .catch((err) => {\n        console.log(\"ERROR getting user \", err);\n        this.initializeApp();\n      });\n\n    this.authService.loggedInSub().subscribe((user) => {\n      this.currentUser = user;\n\n      if (this.currentUser) {\n        this.initServices(this.currentUser);\n      }\n    });\n  }\n\n  redirectToLogin() {\n    if (!this.redirected) {\n      if (this.inviteToken) {\n        this.router.navigate([\"/login\"], {\n          queryParams: { invite: this.inviteToken },\n        });\n      } else {\n        this.router.navigate([\"/login\"]);\n      }\n    }\n    this.redirected = true;\n  }\n  redirectToTestPage() {\n    this.router.navigate([\"/test-call\"]);\n    this.redirected = true;\n  }\n  redirectToAwaitConsultation() {\n    this.router.navigate([\"/await-consultation\"]);\n    this.redirected = true;\n  }\n  isNativeApp() {\n    return !this.platform.is('mobileweb') && ( this.platform.is('ios') || this.platform.is('android'));\n  }\n  async initializeApp() {\n\n    App.addListener('appUrlOpen', data => {\n      const url = new URL(data.url);\n      const token = url.searchParams.get('invite')\n\n      if (/attachment/.test(data.url)) {\n        console.log(\"This is going to open link\")\n        return;\n      }\n\n      if (localStorage.getItem(\"inviteToken\") !== token) {\n        this.authService.logout();\n      }\n\n      localStorage.setItem(\"inviteToken\", token);\n      this.authService.setInviteToken(token);\n      this.router.navigate([\"/login\"], {\n        queryParams: { invite: token },\n      });\n    });\n\n    if (this.platform.is(\"ios\") && this.platform.is(\"cordova\")) {\n      const script2 = document.createElement(\"script\");\n      script2.type = \"text/javascript\";\n      // CHECK IF REQUIRED script2.src = \"assets/libs/adapter-4.0.1.js\";\n      script2.async = false;\n      document.head.appendChild(script2);\n    }\n\n    if (this.inviteToken) {\n      if (localStorage.getItem(\"inviteToken\") !== this.inviteToken) {\n        console.log(\"New invite token .\");\n        localStorage.clear();\n        await this.authService.logout();\n        localStorage.setItem(\"inviteToken\", this.inviteToken);\n        // document.location.reload()\n      }\n    }\n\n    this.platform.ready().then(() => {\n      window.platform = this.platform;\n\n      if (this.isNativeApp()) {\n        SplashScreen.hide();\n      }\n      if (\n        this.platform.is(\"ios\") &&\n        this.platform.is(\"cordova\") &&\n        this.isNativeApp()\n      ) {\n        console.log(\"Initializing iosrtc\");\n        try {\n          cordova.plugins.iosrtc.registerGlobals();\n        } catch (error) {\n          console.error(error);\n        }\n      }\n\n      console.log(\"router \", this.router, this.router.url);\n      if (!this.testRoute) {\n        this.redirectToLogin();\n      }\n\n        if ( !this.platform.is('mobileweb') && ( this.platform.is('ios') || this.platform.is('android'))) {\n          var notificationFile = 'public/assets/sounds/notification.mp3'\n        } else {\n          var notificationFile = 'notification.mp3'\n        }\n\n        NativeAudio.preload({\n          assetId:'ringSound', \n          assetPath: notificationFile, \n          // volume: 1,\n          audioChannelNum: 1,\n          isUrl: false\n        })\n        .then(\n          (r) => {\n            console.log(\"audio loaded \", r);\n          },\n          (err) => {\n            console.log(\"error loading sample here\", err);            \n          }\n          );\n    });\n  }\n\n  initServices(r?) {\n    this.socketEventsService.init(r, () => {});\n\n    this.consultationService.init(r);\n\n    this.callService.getCall().subscribe((e) => {\n      console.log(\"get call \", e);\n\n      this.consultation = e;\n      this.consultation.id = e._id;\n      this.callRunning = true;\n    });\n    // incoming call\n  }\n\n  androidWakeUp() {\n    if (this.platform.is(\"cordova\")) {\n      cordova.plugins.backgroundMode.overrideBackButton();\n      cordova.plugins.backgroundMode.wakeUp();\n      cordova.plugins.backgroundMode.moveToForeground();\n\n      // must be here for it to work..\n      cordova.plugins.backgroundMode.unlock();\n      cordova.plugins.backgroundMode.disable();\n    }\n  }\n}\n","import { SharedModule } from './shared/shared.module';\nimport { TestModule } from './test/test.module';\nimport { PeerAudioComponent } from './shared/components/stream/peer-audio/peer-audio.component';\nimport { PeerVideoComponent } from './shared/components/stream/peer-video/peer-video.component';\nimport { NgModule, LOCALE_ID, APP_INITIALIZER } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { RouteReuseStrategy } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule, IonicRouteStrategy } from '@ionic/angular';\n//import { SplashScreen } from '@awesome-cordova-plugins/splash-screen/ngx';\nimport { SplashScreen } from '@capacitor/splash-screen';\n\nimport { AppComponent } from './app.component';\nimport { AppRoutingModule } from './app-routing.module';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\n// import { VideoRoomPageModule } from './video-room/video-room.module';\nimport { AngularDraggableModule } from 'angular2-draggable';\n\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { AndroidPermissions } from '@awesome-cordova-plugins/android-permissions/ngx';\n\nimport { VideoRoomPageModule } from './video-room/video-room.module';\n\nimport { File } from '@awesome-cordova-plugins/file/ngx';\nimport { Camera } from '@awesome-cordova-plugins/camera/ngx';\nimport { Media } from '@awesome-cordova-plugins/media/ngx';\n\nimport { NativeAudio } from '@awesome-cordova-plugins/native-audio/ngx';\nimport { LocalNotifications } from '@awesome-cordova-plugins/local-notifications/ngx';\nimport { Network } from '@awesome-cordova-plugins/network/ngx';\n\nimport { HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { JwtInterceptor } from './auth/jwt.interceptor';\nimport { ErrorInterceptor } from './auth/error.interceptor';\nimport { registerLocaleData } from '@angular/common';\n\n// translate\nimport { I18nModule } from './i18n/i18n.module';\n\nimport localeFr from '@angular/common/locales/fr';\nimport localeDe from '@angular/common/locales/de';\nimport localeEn from '@angular/common/locales/en';\n\nregisterLocaleData(localeFr);\nregisterLocaleData(localeDe);\nregisterLocaleData(localeEn);\n\n\nimport { RequestConsultationComponent } from './shared/components/request-consultation/request-consultation.component';\nimport { CloseConsultationComponent } from './shared/components/close-consultation/close-consultation.component';\nimport { ChooseAttachmentComponent } from './shared/components/choose-attachment/choose-attachment.component';\nimport { ConfigService } from './config.service';\nimport { TranslatorFormComponent } from './login/translator-form/translator-form.component';\nimport { LoginPageModule } from './login/login.module';\n\nimport { HugAngularLibModule } from 'hug-angular-lib';\n\n\n@NgModule({\n    imports: [\n        BrowserModule,\n        BrowserAnimationsModule,\n        ReactiveFormsModule,\n        IonicModule.forRoot({\n            platform: {\n              /** The default `desktop` function returns false for devices with a touchscreen.\n              * This is not always wanted, so this function tests the User Agent instead.\n              **/\n              'desktop': (win) => {\n                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(win.navigator.userAgent);\n                return !isMobile;\n              }\n            },\n          }),\n        AppRoutingModule,\n        HttpClientModule,\n        VideoRoomPageModule,\n        AngularDraggableModule,\n        FormsModule,\n       // VideoRoomPageModule, //cordova plugin add cordova-plugin-background-mode\n        // translate\n        I18nModule,\n        HugAngularLibModule,\n        SharedModule\n    ],\n    providers: [\n        { provide: RouteReuseStrategy, useClass: IonicRouteStrategy },\n         AndroidPermissions,\n        File,\n        Camera,\n        Media,\n        NativeAudio,\n        LocalNotifications,\n        Network,\n        { provide: HTTP_INTERCEPTORS, useClass: JwtInterceptor, multi: true },\n        { provide: HTTP_INTERCEPTORS, useClass: ErrorInterceptor, multi: true },\n        { provide: LOCALE_ID, useValue: 'fr-FR' },\n        ConfigService,\n        {\n            provide: APP_INITIALIZER,\n            useFactory: (cs: ConfigService) => () => cs.getConfig(),\n            deps: [ConfigService],\n            multi: true\n        }\n    ],\n    declarations: [\n        AppComponent,\n        RequestConsultationComponent,\n        CloseConsultationComponent,\n        ChooseAttachmentComponent,\n    ],\n    bootstrap: [AppComponent],\n})\nexport class AppModule { }\n","import { Platform } from '@ionic/angular';\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { environment } from '../../environments/environment';\nimport { SocketEventsService } from '../socket-events.service';\nimport { ConsultationService } from '../consultation.service';\nimport { Router } from '@angular/router';\nimport { User } from '../user';\nimport { GlobalVariableService } from '../global-variable.service';\nimport { CapacitorCookies } from '@capacitor/core';\n\ndeclare let window: any;\n\n@Injectable({ providedIn: 'root' })\nexport class AuthService {\n  private currentUserSubject: BehaviorSubject<User> = new BehaviorSubject<User>(null);\n  private loggedIn: Subject<User> = new Subject();\n  private inviteToken: Subject<string> = new Subject();\n  public currentUser: Observable<User>;\n\n  constructor(\n    private http: HttpClient,\n    private _socketEventsService: SocketEventsService,\n    private consultationService: ConsultationService,\n    private router: Router,\n    private globalVariableService: GlobalVariableService,\n    private platform: Platform\n  ) {\n\n  }\n\n  init() {\n    this.currentUserSubject = new BehaviorSubject<User>(null);\n    this.currentUser = this.currentUserSubject.asObservable();\n    return this.getCurrentUser().toPromise()\n  }\n  public get currentUserValue(): User {\n    return this.currentUserSubject.value;\n  }\n\n  public get currentInviteToken(): string {\n    const sessionToken = localStorage.getItem('inviteToken');\n    return sessionToken;\n  }\n\n  public setInviteToken(inviteToken) {\n    console.log('SET invite token')\n    localStorage.setItem('inviteToken', inviteToken);\n    this.inviteToken.next(inviteToken);\n  }\n\n  public observeInviteToken(): Observable<string> {\n    return this.inviteToken.asObservable();\n  }\n\n  public loggedInSub() {\n    return this.loggedIn;\n  }\n\n\n  //\n  loginWithInvite(inviteToken, phoneNumber?, translator?) {\n    const opts = { withCredentials: true };\n    \n    return this.http.post<any>(`${this.globalVariableService.getApiPath()}/login-invite`, { inviteToken, phoneNumber, translator }, opts).pipe(map(res => {\n      console.log('logged in and got user data ', res);\n      // login successful if there's a jwt token in the response\n      if (res.user && res.user.token) {\n        // store user details and jwt token in local storage to keep user logged in between page refreshes\n        this.currentUserSubject.next(res.user);\n      }\n      // this._socketEventsService.init(res.user);\n      this.consultationService.init(res.user);\n      this.loggedIn.next(res.user);\n\n\n      if (this.platform.is('cordova') && window.cordova && window.cordova.plugins) {\n        console.log('Flush cookies ');\n        //(<any>window).cordova.plugins.CookieManagementPlugin.flush();\n      }\n      return res.user;\n    }));\n  }\n  // //\n  // login() {\n  //   return this.http.get<any>(`${this.globalVariableService.getApiPath()}/login-cert`, {}).pipe(map(res => {\n  //     console.log('got user data ', res);\n  //     // login successful if there's a jwt token in the response\n  //     if (res.user && res.user.token) {\n  //       // store user details and jwt token in local storage to keep user logged in between page refreshes\n  //       localStorage.setItem('currentUser', JSON.stringify(res.user));\n  //       this.currentUserSubject.next(res.user);\n  //     }\n  //     this._socketEventsService.init(res.user);\n  //     this.consultationService.init(res.user);\n  //     this.loggedIn.next(res.user);\n\n  //     return res.user;\n  //   }));\n  // }\n\n  logout() {\n    // remove user from local storage to log user out\n    console.log('LOGOUT')\n    localStorage.removeItem('inviteToken');\n    localStorage.removeItem('currentConsultation');\n    localStorage.removeItem('birthDate');\n\n    this.currentUserSubject.next(null);\n    this._socketEventsService.disconnect()\n\n    console.log(\"COOOKIIIES\", document.cookie)\n\n    if (this.platform.is('cordova') && window.cordova && window.cordova.plugins) {\n      //(<any>window).cordova.plugins.CookieManagementPlugin.flush();\n    }\n    return this.http.get(`${this.globalVariableService.getApiPath()}/logout`).toPromise()\n  }\n  getToken() {\n    return this.currentUserSubject.value.token;\n  }\n\n  getCurrentUser(token?):Observable<any> {\n    const opts = { withCredentials: true };\n    \n\n    return this.http.get<any>(`${this.globalVariableService.getApiPath()}/current-user`, opts).pipe(map(res => {\n\n      this.currentUserSubject.next(res.user);\n\n      return res.user\n    }))\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { AuthService } from './auth.service';\n\n@Injectable()\nexport class ErrorInterceptor implements HttpInterceptor {\n  constructor(private authService: AuthService, private router: Router) { }\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    return next.handle(request).pipe(catchError(err => {\n      console.log('error with request ...............................', err);\n\n      // if (err.url && err.url.indexOf('login-cert') >= 0) {\n\n      // return throwError(err);\n\n      // }\n      // if (err.status === 401) {\n\n      //   // auto logout if 401 response returned from api\n      //   this.authService.logout();\n      //   this.router.navigate(['/login']);\n      //   //   alert(\"La session sur cet appareil n'est plus valide, l'application va redmarrer.\")\n      // }\n\n      // const error = err.error.message || err.statusText;\n      console.log('error ', err);\n      return throwError(err);\n    }));\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport { Injectable } from '@angular/core';\nimport { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { AuthService } from './auth.service';\nimport { environment } from '../../environments/environment'\n@Injectable()\nexport class JwtInterceptor implements HttpInterceptor {\n    constructor(private authService: AuthService,\n        private translate: TranslateService\n    ) { }\n\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\n        console.log('add local header ', this.translate.currentLang)\n        request = request.clone({\n            setHeaders: {\n                'locale': this.translate.currentLang || 'fr'\n            }\n        })\n\n        // add authorization header with jwt token if available\n        let currentUser = this.authService.currentUserValue;\n        console.log(\"CURRENT USER\", currentUser);\n        if (currentUser && currentUser.token) {\n            request = request.clone({\n                setHeaders: {\n                    \"x-access-token\": `${currentUser.token}`,\n                    \"inviteToken\": `${this.authService.currentInviteToken}`\n                }\n            });\n        }\n\n        return next.handle(request);\n    }\n}\n","import { GlobalVariableService } from './global-variable.service';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Subject, BehaviorSubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CallService {\n  private callObs$ = new Subject();\n\n  public isFullScreen: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  constructor(private http: HttpClient, private globalVariableService: GlobalVariableService) {\n\n  }\n  getCall(): any {\n    return this.callObs$;\n  }\n\n  requestCall(data: boolean) {\n    this.callObs$.next(data);\n  }\n\n  getCurrentCall(consultationId) {\n    return this.http.get<any>(this.globalVariableService.getApiPath() + '/consultation/' + consultationId + '/current-call')\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { BehaviorSubject, Observable, Subject } from \"rxjs\";\nimport { GlobalVariableService } from \"./global-variable.service\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class ConfigService {\n  public configSub: Subject<any> = new Subject();\n  public config;\n  public api: string;\n  constructor(\n    private http: HttpClient,\n    private globalVariableService: GlobalVariableService\n  ) {}\n\n  getConfig() {\n    this.globalVariableService.host.subscribe(() => {\n      console.log(\n        \"host updated config service\",\n        this.globalVariableService.getApiPath()\n      );\n      return this.http\n        .get<any>(`${this.globalVariableService.getApiPath()}/config`)\n        .toPromise()\n        .then((config) => {\n          console.log(\"got config\", config);\n          this.config = config;\n          this.configSub.next(config);\n          this.globalVariableService.serverError = false;\n          if (\n            config.accessibilityMode &&\n            config.accessibilityMode !== \"false\"\n          ) {\n            document.documentElement.setAttribute(\n              \"data-theme\",\n              \"accessibility\"\n            );\n          }\n        })\n        .catch((err) => {\n          this.globalVariableService.serverError = true;\n        });\n    });\n  }\n}\n","import { Platform } from '@ionic/angular';\nimport { GlobalVariableService } from './global-variable.service';\nimport { Injectable } from '@angular/core';\nimport { Observable, of, BehaviorSubject, throwError, Subscription } from 'rxjs';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport { environment } from '../environments/environment';\nimport {\n  tap, map, filter, retryWhen,\n  concatMap,\n  delay\n} from 'rxjs/operators';\nimport { SocketEventsService } from './socket-events.service';\nimport { Router } from '@angular/router';\n\ndeclare let cordova: any;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConsultationService {\n\n  consultationsOverview: Array<any> = [];\n  unreadActiveSub: BehaviorSubject<number> = new BehaviorSubject(this.unreadSum('active'));\n  unreadPendingSub: BehaviorSubject<number> = new BehaviorSubject(this.unreadSum('pending'));\n  unreadClosedSub: BehaviorSubject<number> = new BehaviorSubject(this.unreadSum('closed'));\n\n  consultationsOverviewSub: BehaviorSubject<any[]> = new BehaviorSubject(this.consultationsOverview);\n  backgroundConsultationSubscription: Subscription;\n  backgroundNoConstellationsTimerId;\n  currentUser;\n  constructor(\n    private http: HttpClient,\n    private socketEventsService: SocketEventsService,\n    private router: Router,\n    private globalVariableService: GlobalVariableService,\n    private platform:Platform\n  ) {\n\n  }\n\n  init(currentUser) {\n\n    console.log('init consultations');\n    this.currentUser = currentUser;\n\n    this.socketEventsService.onMessage().subscribe(msg => {\n      console.log('new message ');\n      const c = this.consultationsOverview.find(c => c._id === msg.data.consultation);\n      c.lastMsg = msg.data;\n      c.unreadCount++;\n      this.updateUnreadCount();\n      this.sortConsultations();\n      this.consultationsOverviewSub.next(this.consultationsOverview);\n    });\n    this.socketEventsService.onConsultationAccepted().subscribe(event => {\n\n      const consultation = this.consultationsOverview.find(c => c._id === event.data._id);\n\n      if (consultation) {\n\n        consultation.consultation.status = 'active';\n        consultation.doctor = event.data.doctor;\n        this.sortConsultations();\n        this.consultationsOverviewSub.next(this.consultationsOverview);\n      }\n\n    });\n\n    this.socketEventsService.onConsultationClosed().subscribe(event => {\n\n      const consultation = this.consultationsOverview.find(c => c._id === event.data._id);\n\n      if (consultation) {\n\n        consultation.consultation.status = 'closed';\n        this.sortConsultations();\n        this.consultationsOverviewSub.next(this.consultationsOverview);\n      }\n\n    });\n\n\n\n    this.fetchConsultations().subscribe(c => {\n      this.sortConsultations();\n      this.consultationsOverviewSub.next(this.consultationsOverview);\n    });\n\n\n    this.socketEventsService.onNewConsultation().subscribe(event => {\n      console.log('New consultation EVvent ', event)\n      // this.consultationsOverview.find(c=> c.)\n      this.consultationsOverview.push(event.data)\n      this.consultationsOverviewSub.next(this.consultationsOverview)\n\n    })\n\n  }\n\n  fetchConsultations() {\n    return this.http.get<any[]>(this.globalVariableService.getApiPath() + '/consultations-overview').pipe(tap(consultations => {\n      console.log('got consultation overview ', consultations);\n      consultations.forEach(consultation => {\n        if (consultation._id) {\n          consultation.id = consultation._id\n        }\n      })\n      this.consultationsOverview = consultations;\n      this.updateUnreadCount();\n    })).pipe(\n      tap((ev) => {\n        if (ev instanceof HttpResponse) {\n          console.log('###processing response', ev);\n        }\n      }),\n      retryWhen(errors => errors\n        .pipe(\n          concatMap((error, count) => {\n            console.log('errro>> ', error, ' retry ', error.status, count);\n            if (count < 5 && (error.status === 400 || error.status === 0 || error.status === 503)) {\n              return of(error.status);\n            }\n\n            throwError(error);\n          }),\n          delay(1000)\n        )\n\n      ))\n  }\n\n  createConsultation(consultation): Observable<any> {\n\n    return this.http.post<any[]>(this.globalVariableService.getApiPath() + `/consultation`, consultation).pipe(tap(c => {\n      if (c) { this.consultationsOverview.push({ consultation: c, _id: c.id }) };\n    }));\n  }\n\n  getConsultationsOverview(): BehaviorSubject<any> {\n\n    return this.consultationsOverviewSub;\n  }\n\n  getConsultation(id): Observable<any> {\n\n    return this.fetchConsultations().pipe(map(() => {\n      const consultation = this.consultationsOverview.find(c => c._id === id);\n      console.log('return con ', consultation);\n      if (consultation._id) {\n        consultation.id = consultation._id\n      }\n      return consultation ? consultation : null;\n    }));\n  }\n\n  cancelConsultation(id): Observable<any> {\n    return this.http.post<any[]>(this.globalVariableService.getApiPath() + `/consultation/${id}/cancel`, null).pipe(tap(res => {\n      this.consultationsOverview.forEach(c => {\n        if (c._id === id) {\n          c.consultation.status = 'canceled';\n        }\n      });\n      this.consultationsOverviewSub.next(this.consultationsOverview);\n      this.updateUnreadCount();\n\n    }));\n  }\n  readMessages(consultationId) {\n\n    return this.http.post<any[]>(this.globalVariableService.getApiPath() + `/consultation/${consultationId}/read-messages`, {}).subscribe(r => {\n      console.log('response ', r);\n      const c = this.consultationsOverview.find(c => c._id === consultationId);\n      c.unreadCount = 0;\n      this.updateUnreadCount();\n    });\n  }\n\n  unreadActiveCount(): BehaviorSubject<number> {\n    return this.unreadActiveSub;\n  }\n\n  unreadPendingCount(): BehaviorSubject<number> {\n    return this.unreadPendingSub;\n  }\n  unreadClosedCount(): BehaviorSubject<number> {\n    return this.unreadClosedSub;\n  }\n\n\n  unreadSum(status) {\n    return this.consultationsOverview.reduce((a, b) => {\n      return (b.consultation.status === status) ? a + (b.unreadCount || 0) : a;\n    }, 0);\n  }\n\n  updateUnreadCount() {\n    this.unreadActiveSub.next(this.unreadSum('active'));\n    this.unreadPendingSub.next(this.unreadSum('pending'));\n    this.unreadClosedSub.next(this.unreadSum('closed'));\n  }\n\n  sortConsultations() {\n    this.consultationsOverview = this.consultationsOverview.sort((b, a) => {\n      return ((a.lastMsg) ? a.lastMsg.createdAt : a.consultation.createdAt) -\n        ((b.lastMsg) ? b.lastMsg.createdAt : b.consultation.createdAt);\n    });\n  }\n\n  deleteConsultation(consultationId) {\n    console.log('delete consultation ', consultationId);\n    return this.http.delete<any[]>(this.globalVariableService.getApiPath() + `/consultation/${consultationId}`).pipe(tap(res => {\n      this.consultationsOverview = this.consultationsOverview.filter(c => c._id !== consultationId);\n      this.consultationsOverviewSub.next(this.consultationsOverview);\n    }));\n  }\n\n  postFile(blob: File, fileName, consultationId): Observable<any> {\n  let file\n    if (!blob.lastModified) {\n      file = this.blobToFile(blob, fileName);\n      console.log('file name:', file);\n      \n    } else {\n      file = blob\n      \n    }\n    const endpoint = this.globalVariableService.getApiPath() + `/consultation/${consultationId}/upload-file`;\n    const formData: FormData = new FormData();\n    if(file.changingThisBreaksApplicationSecurity !== undefined){      \n      formData.append('attachment', this.convertBase64ToBlob(file.changingThisBreaksApplicationSecurity), file.name);\n    return this.http\n      .post(endpoint, formData, {\n        headers: {\n          'mime-type': this.convertBase64ToBlob(file.changingThisBreaksApplicationSecurity).type,\n          'x-access-token': `${this.currentUser.token}`,\n          fileName: 'image.jpg'\n        }\n      });\n    }else{\n      console.log(file);\n      \n      const rawFile = new File([file], file.name, {\n        type: file.mimeType,\n      });\n  \n      formData.append('attachment', rawFile, file.name);\n    return this.http\n      .post(endpoint, formData, {\n        headers: {\n          'mime-type': file.mimeType,\n          'x-access-token': `${this.currentUser.token}`,\n          fileName: file.name\n        }\n      }); \n    }\n\n    \n    \n\n\n   \n  }\n\n  //! Convert our file from base64 to blob\n  private convertBase64ToBlob(base64: string) {    \n    const info = this.getInfoFromBase64(base64);\n    const sliceSize = 512;\n    const byteCharacters = window.atob(info.rawBase64);\n    const byteArrays = [];\n\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n      const slice = byteCharacters.slice(offset, offset + sliceSize);\n      const byteNumbers = new Array(slice.length);\n\n      for (let i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n\n      byteArrays.push(new Uint8Array(byteNumbers));\n    }\n\n    \n    return new Blob(byteArrays, { type: info.mime });\n  }\n\n  private getInfoFromBase64(base64: string) {    \n    const meta = base64.split(',')[0];\n    const rawBase64 = base64.split(',')[1].replace(/\\s/g, '');\n    const mime = /:([^;]+);/.exec(meta)[1];\n    const extension = /\\/([^;]+);/.exec(meta)[1];\n    \n    return {\n      mime,\n      extension,\n      meta,\n      rawBase64\n    };\n  }\n  //! to here\n  public blobToFile = (theBlob: Blob, fileName: string): File => {\n    const b: any = theBlob;\n    b.lastModifiedDate = new Date();\n    b.name = fileName;\n    return <File>theBlob;\n  }\n\n  /**\n   * Saves the user feedback for a consultation.\n   * @param consultationId The ID of the targeted consultation\n   * @param rating The selected rating\n   * @param comment The user comment\n   */\n  saveConsultationFeedback(consultationId, rating, comment): Observable<any> {\n    return this.http.post<any[]>(this.globalVariableService.getApiPath() + `/consultation/${consultationId}/patientFeedback`, { consultationId, rating, comment });\n  }\n\n  getTranslatorOrGuestConsultation() {\n\n    return this.fetchConsultations().pipe(map(() => {\n      const consultation = this.currentUser.role === 'guest' ? this.consultationsOverview.find(c => c.consultation.guest === this.currentUser.id) :\n        this.consultationsOverview.find(c => c.consultation.translator === this.currentUser.id);\n      console.log('return con ', consultation);\n      return consultation ? consultation : null;\n    }));\n\n\n  }\n\n\n}\n\n","import { environment } from './../environments/environment';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { Platform } from '@ionic/angular';\n@Injectable({\n  providedIn: 'root'\n})\n\n//manage variable that are used in differents views\nexport class GlobalVariableService {\n  private hostBehaviorSubject: BehaviorSubject<string>;\n\n  public host: Observable<string>;\n  public serverError = false;\n  constructor(public platform: Platform) {\n    if(!this.platform.is('mobileweb') && ( this.platform.is('ios') || this.platform.is('android'))){\n      this.resetHost()\n      console.log(\"reset host url\");\n    }\n    let host = this.getHost();\n    if (this.hostBehaviorSubject && this.hostBehaviorSubject.getValue() != host) {\n      this.hostBehaviorSubject.next(host)\n    }\n    else {\n      this.hostBehaviorSubject = new BehaviorSubject<string>(host);\n    }\n\n    this.host = this.hostBehaviorSubject.asObservable()\n  }\n\n  public resetHost(){\n    localStorage.removeItem(\"host\");\n  }\n  public getHost() {\n    let host = localStorage.getItem(\"host\");\n\n    if (!host) {\n      host = environment.host;\n    }\n    console.log(\"HOST IN INIT\" + host)\n\n    localStorage.setItem('host', host);\n\n    return host;\n\n  }\n  public getHostObservable() {\n    return this.hostBehaviorSubject.asObservable();\n  }\n\n  public updateHost(host) {\n    console.log(\"updateHost host \", host)\n    localStorage.setItem('host', host);\n    this.hostBehaviorSubject.next(host);\n  }\n\n  public getHostValue() {\n    console.log(\"getting host value\", this.hostBehaviorSubject.getValue())\n    return this.hostBehaviorSubject.getValue();\n  }\n\n  public getApiPath() {\n    //prevent double slash -> https://app.hug-at-home.ch//api/v1 ->  https://app.hug-at-home.ch/api/v1\n    let apiUrl = (this.hostBehaviorSubject.getValue() + environment.api).replace(/([^:]\\/)\\/+/g, \"$1\")\n    apiUrl = apiUrl.replace(/(\\:)\\:/, \"$1\")\n    console.log(\"getting api path value\", apiUrl);\n    return apiUrl ;\n  }\n}","import { NgModule } from '@angular/core';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { TranslateLoader, TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\n\n@NgModule({\n  imports: [\n    HttpClientModule,\n    TranslateModule.forRoot({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: translateLoaderFactory,\n        deps: [HttpClient]\n      }\n    }),\n  ],\n  exports: [TranslateModule]\n})\n\nexport class I18nModule {\n\n  public defaultLanguage = 'en';\n  public supportedLanguages = [\n    'en',\n    'fr',\n    'es',\n    'ar',\n    'de',\n    'ar',\n    'ta',\n    'ti',\n    'fa',\n    'ru',\n    'it'\n  ]\n  constructor(translate: TranslateService) {\n    translate.addLangs(this.supportedLanguages);\n    const userLang = window.localStorage.getItem('hhp-lang') || translate.getBrowserLang();\n    translate.use(this.supportedLanguages.includes(userLang) ? userLang : this.defaultLanguage);\n  }\n\n}\n\nexport function translateLoaderFactory(httpClient: HttpClient) {\n  return new TranslateHttpLoader(httpClient);\n}\n\n","import { Component, OnInit, Input, Output, EventEmitter, Directive  } from '@angular/core';\n\nimport { ModalController } from '@ionic/angular';\n\n\n@Component({\n    selector: 'chat-component',\n    templateUrl: './chat.component.html',\n    styleUrls: ['./chat.component.scss'],\n})\nexport class ChatComponent implements OnInit {\n    @Input()\n    user;\n\n    @Output()\n    messageReceived = new EventEmitter<any>();\n    @Output()\n    closeChat = new EventEmitter<any>();\n\n    message: string;\n    @Input()\n    messageList: { connectionId: string; message: string; userAvatar: string }[] = [];\n\n    constructor(public modalController: ModalController) { }\n\n    ngOnInit() { }\n\n    eventKeyPress(event) {\n        if (event && event.keyCode === 13) {\n            this.sendMessage();\n        }\n    }\n\n    sendMessage(): void {\n        if (this.user && this.message) {\n            this.message = this.message.replace(/ +(?= )/g, '');\n            if (this.message !== '' && this.message !== ' ') {\n                const data = {\n                    connectionId: this.user.getConnectionId(),\n                    message: this.message,\n                    nickname: this.user.getNickname(),\n                };\n                this.user.getStreamManager().stream.session.signal({\n                    data: JSON.stringify(data),\n                    type: 'chat',\n                });\n                this.scrollToBottom();\n                this.message = '';\n            }\n        }\n    }\n\n    scrollToBottom(): void {\n        setTimeout(() => {\n            try {\n                const contentMessage = document.getElementById('message-wrap');\n                contentMessage.scrollTop = contentMessage.scrollHeight;\n            } catch (err) {\n                console.error(err);\n            }\n        }, 20);\n    }\n\n    dismiss() {\n        this.modalController.dismiss();\n    }\n\n    onFocus() { }\n}\n","import { Component, OnInit, Input, Directive  } from '@angular/core';\nimport { ModalController, Platform } from '@ionic/angular';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n\nimport { FilePicker } from '@capawesome/capacitor-file-picker';\n\n//import { Camera, CameraOptions } from '@awesome-cordova-plugins/camera/ngx';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { AuthService } from '../../../auth/auth.service';\n\nimport { environment } from '../../../../environments/environment';\nimport { TranslateService } from \"@ngx-translate/core\";\n\n\n@Component({\n  selector: 'app-choose-attachment',\n  templateUrl: './choose-attachment.component.html',\n  styleUrls: ['./choose-attachment.component.scss']\n})\nexport class ChooseAttachmentComponent implements OnInit {\n  @Input() consultationId;\n  photo: SafeResourceUrl;\n  currentUser;\n  constructor(\n    public modalController: ModalController,\n    private authService: AuthService,\n    public platform: Platform,\n    private sanitizer: DomSanitizer,\n    private translate: TranslateService,\n  ) { }\n\n  ngOnInit() {\n    this.currentUser = this.authService.currentUserValue;\n  }\n\n  async pickFiles () {\n    const result = await FilePicker.pickFiles({\n      // types: ['image/png'],\n      types: ['application/pdf'],\n      multiple: false,\n    });\n  };\n\n  async chooseFile() {\n    FilePicker.pickFiles()\n    .then((uri) => {\n      this.dismiss(uri.files[0], 'file');\n    })\n    .catch(e => console.log(e));\n  }\n\n  dismiss(filePath?, type?) {   \n    this.modalController.dismiss({\n      filePath,\n      type:type\n    });\n  }\n\n\n  async takePicture() {\n\n    // const options: CameraOptions = {\n    //   quality: 40,\n    //   destinationType: this.camera.DestinationType.FILE_URI,\n    //   encodingType: this.camera.EncodingType.JPEG,\n    //   mediaType: this.camera.MediaType.PICTURE,\n    //   //targetWidth: 720\n    // };\n\n    // this.camera.getPicture(options).then((imageData) => {\n\n    //   this.dismiss(imageData, 'image');\n    // }, (err) => {\n    //   console.log('error choosing image', err);\n    //   // if (err && .includes('No Image Selected')) {\n    //   //   return\n    //   // }\n    //   alert('Error choosing image ' + err);\n    // });\n    const image =  await Camera.getPhoto({\n      quality: 90,\n      allowEditing: false,\n      resultType: CameraResultType.DataUrl,\n      source: CameraSource.Prompt,\n      promptLabelPhoto: this.translate.instant('chooseAttachement.promptLabelPhoto'),\n      promptLabelPicture: this.translate.instant('chooseAttachement.promptLabelPicture')\n    });\n    \n    this.photo = this.sanitizer.bypassSecurityTrustResourceUrl(image && (image.dataUrl));\n    \n    this.dismiss(this.photo, 'file');\n  \n  }\n  chooseFileBrowser() {\n    return new Promise((resolve, reject) => {\n    \n      const inputElement = document.getElementById(\"input-file\");\n      inputElement.addEventListener(\"change\", function () { \n        resolve((this as HTMLInputElement).files[0])\n      }, false);\n      inputElement.click();\n    })\n  }\n  isNativeApp() {\n    return !this.platform.is('mobileweb') && ( this.platform.is('ios') || this.platform.is('android'));\n  }\n}\n","import { Component, OnInit, Input, Directive  } from \"@angular/core\";\nimport { ConsultationService } from \"../../../consultation.service\";\nimport { Router } from \"@angular/router\";\nimport { ModalController } from \"@ionic/angular\";\n\n\n@Component({\n  selector: \"app-close-consultation\",\n  templateUrl: \"./close-consultation.component.html\",\n  styleUrls: [\"./close-consultation.component.scss\"],\n})\nexport class CloseConsultationComponent implements OnInit {\n  @Input() consultationId;\n  constructor(\n    private consultationService: ConsultationService,\n    private router: Router,\n    public modalController: ModalController\n  ) {}\n\n  ngOnInit() {}\n\n  closeConsultation() {\n    console.log(\"Close consultation now\");\n    this.consultationService\n      .deleteConsultation(this.consultationId)\n      .subscribe((res) => {\n        localStorage.removeItem(\"currentConsultation\");\n        localStorage.removeItem(\"currentUser\");\n        this.modalController.dismiss();\n        this.router.navigate([\"/login\"]);\n        console.log(\"Cancellation done\");\n      });\n  }\n  dismiss() {\n    this.modalController.dismiss();\n  }\n}\n","import { Component, OnInit, Directive  } from '@angular/core';\nimport { ConsultationService } from '../../../consultation.service';\nimport { Router } from '@angular/router';\nimport { ChangeDetectorRef } from '@angular/core';\n\n\nimport { ModalController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-request-consultation',\n  templateUrl: './request-consultation.component.html',\n  styleUrls: ['./request-consultation.component.scss']\n})\nexport class RequestConsultationComponent implements OnInit {\n\n  term1 = false;\n  term2 = false;\n  term3 = false;\n  firstName = '@Home';\n  lastName = '@Home';\n  gender;\n  birthDate = new Date('1960-06-15').toISOString();\n  IMADTeam;\n  constructor(private consultationService: ConsultationService, private router: Router,\n    public modalController: ModalController,\n    private cdRef: ChangeDetectorRef) { }\n\n  ngOnInit() {\n\n  }\n\n  createConsultation() {\n\n    if (this.term1 && this.term2 && this.term3) {\n      this.consultationService.createConsultation({\n        firstName: this.firstName,\n        lastName: this.lastName,\n        gender: this.gender,\n        birthDate: this.birthDate,\n        IMADTeam: this.IMADTeam\n      }).subscribe(res => {\n        console.log('res ', res);\n        this.modalController.dismiss();\n        this.router.navigate(['/consultation/' + res.id]);\n\n\n      }, err => {\n        console.log(err);\n        this.modalController.dismiss();\n      });\n    } else {\n      console.log('you must accept all terms ');\n    }\n    console.log(this.term1,\n      this.term2,\n      this.term3,\n      this.firstName,\n      this.lastName,\n      this.gender,\n      this.birthDate,\n      this.IMADTeam);\n    // this.consultationService\n  }\n  dismiss() {\n    this.modalController.dismiss();\n\n  }\n\n  strictIMAD(value) {\n    // manually launch change detection\n    console.log('changed ', value);\n    this.cdRef.detectChanges();\n    this.IMADTeam = String(value).length > 3 ? parseInt(String(value).substring(0, 3)) : value;\n  }\n}\n","import { Stream } from 'hug-angular-lib';\nimport { Component, Input, OnInit, ViewChild, ElementRef, Directive  } from '@angular/core';\n\n\n@Component({\n  selector: 'app-peer-audio',\n  templateUrl: './peer-audio.component.html',\n  styleUrls: ['./peer-audio.component.scss']\n})\nexport class PeerAudioComponent implements OnInit {\n\n  @ViewChild('audioElement') elementRef: ElementRef;\n\n  @Input() stream: Stream\n  constructor() { }\n\n  ngAfterViewInit() {\n    this.elementRef.nativeElement.srcObject = this.stream.mediaStream\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { Subscription } from \"rxjs\";\nimport { Stream, LogService } from \"hug-angular-lib\";\nimport { Component, Input, ViewChild, ElementRef, OnDestroy, AfterViewInit, OnChanges, Directive  } from \"@angular/core\";\n\n\n@Component({\n  selector: \"app-peer-video\",\n  templateUrl: \"./peer-video.component.html\",\n  styleUrls: [\"./peer-video.component.scss\"],\n})\nexport class PeerVideoComponent implements AfterViewInit, OnDestroy, OnChanges {\n  @ViewChild(\"videoElement\") elementRef: ElementRef;\n\n  @Input() stream: Stream;\n\n  subscriptions: Subscription[] = [];\n  constructor(private logger: LogService) {}\n\n  ngAfterViewInit() {\n    this.updateVideoSrc();\n  }\n\n  // ngOnInit(): void {\n  // Called after the constructor, initializing input properties, and the first call to ngOnChanges.\n  // Add 'implements OnInit' to the class.\n  // this.subscriptions.push(this.stream.onLayerChange.subscribe(() => {\n  //   this.logger.debug('ov-vide onlayerchanged.........')\n  //   this.elementRef.nativeElement.srcObject = this.stream.mediaStream\n  // }))\n  // }\n\n  ngOnDestroy(): void {\n    // Called once, before the instance is destroyed.\n    // Add 'implements OnDestroy' to the class.\n    this.subscriptions.forEach((s) => s.unsubscribe());\n  }\n\n  ngOnChanges(changes) {\n    // console.log(\"Peer video changes \", changes, this.elementRef);\n    if (changes.stream) {\n      this.stream = changes.stream.currentValue;\n      this.updateVideoSrc();\n    }\n  }\n\n  updateVideoSrc() {\n    if (this.elementRef && this.stream) {\n      this.elementRef.nativeElement.srcObject = this.stream.mediaStream;\n    }\n    setTimeout(() => {\n      // console.log(\"elemref\", this.elementRef, this.stream);\n      if (this.elementRef) {\n        this.elementRef.nativeElement.srcObject = this.stream.mediaStream;\n      }\n    }, 500);\n  }\n}\n","// declare var $: any;\n\nexport interface OpenViduLayoutOptions {\n  maxRatio: number;\n  minRatio: number;\n  fixedRatio: boolean;\n  animate: any;\n  bigClass: string;\n  bigPercentage: any;\n  bigFixedRatio: any;\n  bigMaxRatio: any;\n  bigMinRatio: any;\n  bigFirst: any;\n}\n\nexport class OpenViduLayout {\n  private layoutContainer: HTMLElement;\n  private opts: OpenViduLayoutOptions;\n\n  private fixAspectRatio(elem: HTMLVideoElement, width: number) {\n    const sub: HTMLVideoElement = <HTMLVideoElement>elem.querySelector('.OT_root');\n    if (sub) {\n      // If this is the parent of a subscriber or publisher then we need\n      // to force the mutation observer on the publisher or subscriber to\n      // trigger to get it to fix it's layout\n      const oldWidth = sub.style.width;\n      sub.style.width = width + 'px';\n      // sub.style.height = height + 'px';\n      sub.style.width = oldWidth || '';\n    }\n  }\n\n  private positionElement(elem: HTMLVideoElement, x: number, y: number, width: number, height: number, animate: any) {\n    // const targetPosition = {\n    //   left: x + 'px',\n    //   top: y + 'px',\n    //   width: width + 'px',\n    //   height: height + 'px',\n    // };\n\n    this.fixAspectRatio(elem, width);\n\n    // if (animate && $) {\n      // $(elem).stop();\n    //   $(elem).animate(targetPosition, animate.duration || 200, animate.easing || 'swing', () => {\n    //     this.fixAspectRatio(elem, width);\n    //     if (animate.complete) {\n    //       animate.complete.call(this);\n    //     }\n    //   });\n    // } else {\n    //   $(elem).css(targetPosition);\n    // }\n    elem.style.left = x + 'px';\n    elem.style.top = y + 'px';\n    elem.style.width = width + 'px';\n    elem.style.height = height + 'px';\n\n    \n    this.fixAspectRatio(elem, width);\n  }\n\n  private getVideoRatio(elem: HTMLVideoElement) {\n    if (!elem) {\n      return 3 / 4;\n    }\n    const video: HTMLVideoElement = <HTMLVideoElement>elem.querySelector('video');\n    if (video && video.videoHeight && video.videoWidth) {\n      return video.videoHeight / video.videoWidth;\n    } else if (elem.videoHeight && elem.videoWidth) {\n      return elem.videoHeight / elem.videoWidth;\n    }\n    return 3 / 4;\n  }\n\n  private getCSSNumber(elem: HTMLElement, prop: string) {\n    // const cssStr = $(elem).css(prop);\n    const cssStr = elem.style[prop];\n    // return cssStr ? parseInt(cssStr, 10) : 0;\n\n    return cssStr ? cssStr : 0;\n  }\n\n  // Really cheap UUID function\n  private cheapUUID() {\n    return (Math.random() * 100000000).toFixed(0);\n  }\n\n  private getHeight(elem: HTMLElement) {    \n    // const heightStr = $(elem).css('height');\n    // const heightStr = elem.style.height;\n    const heightStr = elem.offsetHeight;    \n    // return heightStr ? parseInt(heightStr, 10) : 0;\n    return heightStr ? heightStr : 0;\n\n  }\n\n  private getWidth(elem: HTMLElement) {\n    // const widthStr = $(elem).css('width');\n    // const widthStr = elem.style.width;\n    const widthStr = elem.offsetWidth;\n    return widthStr ? widthStr : 0;\n  }\n\n  private getBestDimensions(minR: number, maxR: number, count: number, WIDTH: number, HEIGHT: number, targetHeight: number) {\n    let maxArea, targetCols, targetRows, targetWidth, tWidth, tHeight, tRatio;\n\n    // Iterate through every possible combination of rows and columns\n    // and see which one has the least amount of whitespace\n    for (let i = 1; i <= count; i++) {\n      const colsAux = i;\n      const rowsAux = Math.ceil(count / colsAux);\n\n      // Try taking up the whole height and width\n      tHeight = Math.floor(HEIGHT / rowsAux);\n      tWidth = Math.floor(WIDTH / colsAux);\n\n      tRatio = tHeight / tWidth;\n      if (tRatio > maxR) {\n        // We went over decrease the height\n        tRatio = maxR;\n        tHeight = tWidth * tRatio;\n      } else if (tRatio < minR) {\n        // We went under decrease the width\n        tRatio = minR;\n        tWidth = tHeight / tRatio;\n      }\n\n      const area = tWidth * tHeight * count;\n\n      // If this width and height takes up the most space then we're going with that\n      if (maxArea === undefined || area > maxArea) {\n        maxArea = area;\n        targetHeight = tHeight;\n        targetWidth = tWidth;\n        targetCols = colsAux;\n        targetRows = rowsAux;\n      }\n    }\n    return {\n      maxArea: maxArea,\n      targetCols: targetCols,\n      targetRows: targetRows,\n      targetHeight: targetHeight,\n      targetWidth: targetWidth,\n      ratio: targetHeight / targetWidth,\n    };\n  }\n\n  private arrange(\n    children: HTMLVideoElement[],\n    WIDTH: number,\n    HEIGHT: number,\n    offsetLeft: number,\n    offsetTop: number,\n    fixedRatio: boolean,\n    minRatio: number,\n    maxRatio: number,\n    animate: any,\n  ) {\n    let targetHeight;\n\n    const count = children.length;\n    let dimensions;\n\n    if (!fixedRatio) {\n      dimensions = this.getBestDimensions(minRatio, maxRatio, count, WIDTH, HEIGHT, targetHeight);\n    } else {\n      // Use the ratio of the first video element we find to approximate\n      const ratio = this.getVideoRatio(children.length > 0 ? children[0] : null);\n      dimensions = this.getBestDimensions(ratio, ratio, count, WIDTH, HEIGHT, targetHeight);\n    }\n\n    // Loop through each stream in the container and place it inside\n    let x = 0,\n      y = 0;\n    const rows = [];\n    let row;\n    // Iterate through the children and create an array with a new item for each row\n    // and calculate the width of each row so that we know if we go over the size and need\n    // to adjust\n    for (let i = 0; i < children.length; i++) {\n      if (i % dimensions.targetCols === 0) {\n        // This is a new row\n        row = {\n          children: [],\n          width: 0,\n          height: 0,\n        };\n        rows.push(row);\n      }\n      const elem: HTMLVideoElement = children[i];\n      row.children.push(elem);\n      let targetWidth = dimensions.targetWidth;\n      targetHeight = dimensions.targetHeight;\n      // If we're using a fixedRatio then we need to set the correct ratio for this element\n      if (fixedRatio) {\n        targetWidth = targetHeight / this.getVideoRatio(elem);\n      }\n      row.width += targetWidth;\n      row.height = targetHeight;\n    }\n    // Calculate total row height adjusting if we go too wide\n    let totalRowHeight = 0;\n    let remainingShortRows = 0;\n    for (let i = 0; i < rows.length; i++) {\n      row = rows[i];\n      if (row.width > WIDTH) {\n        // Went over on the width, need to adjust the height proportionally\n        row.height = Math.floor(row.height * (WIDTH / row.width));\n        row.width = WIDTH;\n      } else if (row.width < WIDTH) {\n        remainingShortRows += 1;\n      }\n      totalRowHeight += row.height;\n    }\n    if (totalRowHeight < HEIGHT && remainingShortRows > 0) {\n      // We can grow some of the rows, we're not taking up the whole height\n      let remainingHeightDiff = HEIGHT - totalRowHeight;\n      totalRowHeight = 0;\n      for (let i = 0; i < rows.length; i++) {\n        row = rows[i];\n        if (row.width < WIDTH) {\n          // Evenly distribute the extra height between the short rows\n          let extraHeight = remainingHeightDiff / remainingShortRows;\n          if (extraHeight / row.height > (WIDTH - row.width) / row.width) {\n            // We can't go that big or we'll go too wide\n            extraHeight = Math.floor((WIDTH - row.width) / row.width * row.height);\n          }\n          row.width += Math.floor(extraHeight / row.height * row.width);\n          row.height += extraHeight;\n          remainingHeightDiff -= extraHeight;\n          remainingShortRows -= 1;\n        }\n        totalRowHeight += row.height;\n      }\n    }\n    // vertical centering\n    y = (HEIGHT - totalRowHeight) / 2;\n    // Iterate through each row and place each child\n    for (let i = 0; i < rows.length; i++) {\n      row = rows[i];\n      // center the row\n      const rowMarginLeft = (WIDTH - row.width) / 2;\n      x = rowMarginLeft;\n      for (let j = 0; j < row.children.length; j++) {\n        const elem: HTMLVideoElement = row.children[j];\n\n        let targetWidth = dimensions.targetWidth;\n        targetHeight = row.height;\n        // If we're using a fixedRatio then we need to set the correct ratio for this element\n        if (fixedRatio) {\n          targetWidth = Math.floor(targetHeight / this.getVideoRatio(elem));\n        }\n        elem.style.position = 'absolute';\n        // $(elem).css('position', 'absolute');\n        const actualWidth =\n          targetWidth -\n          this.getCSSNumber(elem, 'paddingLeft') -\n          this.getCSSNumber(elem, 'paddingRight') -\n          this.getCSSNumber(elem, 'marginLeft') -\n          this.getCSSNumber(elem, 'marginRight') -\n          this.getCSSNumber(elem, 'borderLeft') -\n          this.getCSSNumber(elem, 'borderRight');\n\n        const actualHeight =\n          targetHeight -\n          this.getCSSNumber(elem, 'paddingTop') -\n          this.getCSSNumber(elem, 'paddingBottom') -\n          this.getCSSNumber(elem, 'marginTop') -\n          this.getCSSNumber(elem, 'marginBottom') -\n          this.getCSSNumber(elem, 'borderTop') -\n          this.getCSSNumber(elem, 'borderBottom');\n\n        this.positionElement(elem, x + offsetLeft, y + offsetTop, actualWidth, actualHeight, animate);\n        x += targetWidth;\n      }\n      y += targetHeight;\n    }\n  }\n\n  private filterDisplayNone(element: HTMLElement) {\n    return element.style.display !== 'none';\n  }\n\n  updateLayout() {\n    if (this.layoutContainer.style.display === 'none') {\n      return;\n    }\n    let id = this.layoutContainer.id;\n    \n    if (!id) {\n      id = 'OT_' + this.cheapUUID();\n      this.layoutContainer.id = id;\n    }\n\n    const HEIGHT =\n      this.getHeight(this.layoutContainer) -\n      this.getCSSNumber(this.layoutContainer, 'borderTop') -\n      this.getCSSNumber(this.layoutContainer, 'borderBottom');\n    const WIDTH =\n      this.getWidth(this.layoutContainer) -\n      this.getCSSNumber(this.layoutContainer, 'borderLeft') -\n      this.getCSSNumber(this.layoutContainer, 'borderRight');\n\n      \n    const availableRatio = HEIGHT / WIDTH;\n    \n    let offsetLeft = 0;\n    let offsetTop = 0;\n    let bigOffsetTop = 0;\n    let bigOffsetLeft = 0;\n\n    const bigOnes = Array.prototype.filter.call(\n      this.layoutContainer.querySelectorAll('#' + id + '>.' + this.opts.bigClass),\n      this.filterDisplayNone,\n    );\n    const smallOnes = Array.prototype.filter.call(\n      this.layoutContainer.querySelectorAll('#' + id + '>*:not(.' + this.opts.bigClass + ')'),\n      this.filterDisplayNone,\n    );\n\n    if (bigOnes.length > 0 && smallOnes.length > 0) {\n      let bigWidth, bigHeight;\n\n      if (availableRatio > this.getVideoRatio(bigOnes[0])) {\n        // We are tall, going to take up the whole width and arrange small\n        // guys at the bottom\n        bigWidth = WIDTH;\n        bigHeight = Math.floor(HEIGHT * this.opts.bigPercentage);\n        offsetTop = bigHeight;\n        bigOffsetTop = HEIGHT - offsetTop;\n      } else {\n        // We are wide, going to take up the whole height and arrange the small\n        // guys on the right\n        bigHeight = HEIGHT;\n        bigWidth = Math.floor(WIDTH * this.opts.bigPercentage);\n        offsetLeft = bigWidth;\n        bigOffsetLeft = WIDTH - offsetLeft;\n      }\n      if (this.opts.bigFirst) {\n        this.arrange(\n          bigOnes,\n          bigWidth,\n          bigHeight,\n          0,\n          0,\n          this.opts.bigFixedRatio,\n          this.opts.bigMinRatio,\n          this.opts.bigMaxRatio,\n          this.opts.animate,\n        );\n        this.arrange(\n          smallOnes,\n          WIDTH - offsetLeft,\n          HEIGHT - offsetTop,\n          offsetLeft,\n          offsetTop,\n          this.opts.fixedRatio,\n          this.opts.minRatio,\n          this.opts.maxRatio,\n          this.opts.animate,\n        );\n      } else {\n        this.arrange(\n          smallOnes,\n          WIDTH - offsetLeft,\n          HEIGHT - offsetTop,\n          0,\n          0,\n          this.opts.fixedRatio,\n          this.opts.minRatio,\n          this.opts.maxRatio,\n          this.opts.animate,\n        );\n        this.arrange(\n          bigOnes,\n          bigWidth,\n          bigHeight,\n          bigOffsetLeft,\n          bigOffsetTop,\n          this.opts.bigFixedRatio,\n          this.opts.bigMinRatio,\n          this.opts.bigMaxRatio,\n          this.opts.animate,\n        );\n      }\n    } else if (bigOnes.length > 0 && smallOnes.length === 0) {\n      this\n        // We only have one bigOne just center it\n        .arrange(\n          bigOnes,\n          WIDTH,\n          HEIGHT,\n          0,\n          0,\n          this.opts.bigFixedRatio,\n          this.opts.bigMinRatio,\n          this.opts.bigMaxRatio,\n          this.opts.animate,\n        );\n    } else {\n      this.arrange(\n        smallOnes,\n        WIDTH - offsetLeft,\n        HEIGHT - offsetTop,\n        offsetLeft,\n        offsetTop,\n        this.opts.fixedRatio,\n        this.opts.minRatio,\n        this.opts.maxRatio,\n        this.opts.animate,\n      );\n    }\n  }\n\n  initLayoutContainer(container, opts) {\n    console.log('INIT LAYOUT CONTAINER ', container)\n    this.opts = {\n      maxRatio: opts.maxRatio != null ? opts.maxRatio : 3 / 2,\n      minRatio: opts.minRatio != null ? opts.minRatio : 9 / 16,\n      fixedRatio: opts.fixedRatio != null ? opts.fixedRatio : false,\n      animate: opts.animate != null ? opts.animate : false,\n      bigClass: opts.bigClass != null ? opts.bigClass : 'OT_big',\n      bigPercentage: opts.bigPercentage != null ? opts.bigPercentage : 0.8,\n      bigFixedRatio: opts.bigFixedRatio != null ? opts.bigFixedRatio : false,\n      bigMaxRatio: opts.bigMaxRatio != null ? opts.bigMaxRatio : 3 / 2,\n      bigMinRatio: opts.bigMinRatio != null ? opts.bigMinRatio : 9 / 16,\n      bigFirst: opts.bigFirst != null ? opts.bigFirst : true,\n    };\n    // this.layoutContainer = typeof container === 'string' ? $(container) : container;    \n    this.layoutContainer = container;    \n  }\n\n  setLayoutOptions(options: OpenViduLayoutOptions) {\n    this.opts = options;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { catchError, first } from 'rxjs/operators';\nimport { throwError as observableThrowError } from 'rxjs';\nimport { environment } from '../../../environments/environment';\nimport { GlobalVariableService } from '../../global-variable.service';\nimport { promise } from 'protractor';\n@Injectable({\n  providedIn: 'root'\n})\nexport class OpenViduService {\n\n\n\n  constructor(private http: HttpClient,\n    private globalVariableService: GlobalVariableService\n  ) { }\n\n  getTestToken(): Promise<any> {\n    return new Promise((resolve, reject) => {\n\n\n      return this.http.get<any>(this.globalVariableService.getApiPath() + '/consultation/test-call')\n        .pipe(\n          catchError(error => {\n            error.status === 409 ? resolve(null) : reject(error);\n            return observableThrowError(error);\n          })\n        )\n        .subscribe(response => {\n          console.log('response >> ', response);\n          resolve(response);\n        });\n    });\n  }\n\n  getToken(mySessionId: string): Promise<any> {\n    return this.createSessionAndGetToken(mySessionId);\n  }\n\n  createSessionAndGetToken(sessionId: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n\n      const body = JSON.stringify({ customSessionId: sessionId });\n      const options = {\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json',\n\n        })\n      };\n      return this.http.post<any>(this.globalVariableService.getApiPath() + '/consultation/' + sessionId + '/call', body, options)\n        .pipe(\n          first(),\n          catchError(error => {\n            error.status === 409 ? resolve(sessionId) : reject(error);\n            return observableThrowError(error);\n          })\n        )\n        .subscribe(response => {\n          console.log('response >> ', response);\n          resolve(response);\n        });\n    });\n  }\n  rejectCall(consultation: string, message): Promise<any> {\n    return new Promise((resolve, reject) => {\n\n      const body = JSON.stringify({});\n      const options = {\n\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json',\n\n        })\n      };\n      return this.http.post<any>(this.globalVariableService.getApiPath() + '/consultation/' + consultation + '/' + message + '/reject-call', {}, options)\n        .pipe(\n          first()\n        )\n        .subscribe(response => {\n          console.log('response >> ', response);\n          resolve(null);\n        });\n    });\n  }\n\n  acceptCall(consultation: string, message): Promise<any> {\n    return new Promise((resolve, reject) => {\n\n      const body = JSON.stringify({});\n      const options = {\n\n        headers: new HttpHeaders({\n          'Content-Type': 'application/json',\n\n        })\n      };\n      return this.http.post<any>(this.globalVariableService.getApiPath() + '/consultation/' + consultation + '/' + message + '/accept-call', {}, options)\n        .pipe(\n          first()\n        )\n        .subscribe(response => {\n          console.log('response >> ', response);\n          resolve(null);\n        });\n    });\n  }\n\n\n\n}\n","import { PeerVideoComponent } from './components/stream/peer-video/peer-video.component';\nimport { PeerAudioComponent } from './components/stream/peer-audio/peer-audio.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [PeerAudioComponent, PeerVideoComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    PeerAudioComponent, PeerVideoComponent\n  ]\n})\nexport class SharedModule { }\n","import { Injectable } from '@angular/core'\nimport { Observable, Subject } from 'rxjs'\nimport { environment } from '../environments/environment'\n// import { LocalNotifications } from '@awesome-cordova-plugins/local-notifications/ngx'\nimport { LocalNotifications } from '@capacitor/local-notifications'\n\n\nimport { GlobalVariableService } from './global-variable.service'\n\n// declare var io: any\ndeclare var socket: any;\nimport io from 'socket.io-client';\nimport sailsIOClient from 'sails.io.js'\nconst sailsIo = sailsIOClient(io);\nsailsIo.sails.autoConnect = false;\n@Injectable({\n  providedIn: 'root',\n})\nexport class SocketEventsService {\n  socket\n  user\n  public messageSubj: Subject<any> = new Subject()\n  public newCallSubj: Subject<any> = new Subject()\n  public rejectCallSubj: Subject<any> = new Subject()\n  public acceptCallSubj: Subject<any> = new Subject()\n  public consultationAcceptedSubj: Subject<any> = new Subject()\n  public consultationClosedSubj: Subject<any> = new Subject()\n  public newConsultationSubj: Subject<any> = new Subject()\n  public endCallSubj: Subject<any> = new Subject()\n\n\n  constructor(\n    // private localNotifications: LocalNotifications,\n    private globalVariableService: GlobalVariableService,\n  ) { }\n\n  async init(currentUser, cb) {\n    console.log('init socket ', currentUser)\n\n    // Don't need to reset the socket if the user is still the same...\n    if (this.socket && currentUser && this.user) {\n      if (currentUser.id === this.user.id) {\n        return\n      }\n    }\n\n    if (this.user && this.user.token && this.user.token === currentUser.token) {\n      if (this.socket && socket.isConnected()) {\n        return cb()\n      }\n    }\n    if (\n      !this.user ||\n      !this.user.token ||\n      this.user.token !== currentUser.token\n    ) {\n      if (this.socket && socket.isConnected()) {\n        try {\n          await this.socket.disconnect()\n        } catch (err) {\n          console.log('error disconnecting', err)\n        }\n        this.socket = null\n      }\n    }\n\n    if (!currentUser) {\n      this.disconnect()\n      return\n    }\n    this.user = currentUser\n    sailsIo.sails.query = `token=${currentUser.token}`\n    sailsIo.sails.headers = {\n      id: currentUser.id,\n      'x-access-token': currentUser.token,\n    }\n    console.log('WEBSOCKET CONNECT', sailsIo.sails.headers)\n\n    this.socket = sailsIo.sails.connect(this.globalVariableService.getHostValue(), {\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n    })\n      ; (<any>window).socket = this.socket\n\n    this.socket.on('connect', () => {\n      socket.get('/api/v1/subscribe-to-socket', {}, (resData, jwres) => {\n        this.listenToEvents()\n        cb()\n      })\n    })\n\n    // this.localNotifications.on('click').subscribe((e) => {\n    //   console.log('notification event,  ', e)\n    // })\n  }\n\n  reconnect(cb) {\n    if (!this.user) {\n      return cb()\n    }\n    this.disconnect()\n\n    sailsIo.sails.query = `token=${this.user.token}`\n    sailsIo.sails.headers = {\n      id: this.user.id,\n      'x-access-token': this.user.token,\n    }\n\n    this.socket = sailsIo.sails.connect(this.globalVariableService.getHostValue(), {\n      reconnection: true,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n    })\n      ; (<any>window).socket = this.socket\n\n    this.socket.on('connect', () => {\n      socket.get('/api/v1/subscribe-to-socket', {}, (resData, jwres) => {\n        this.listenToEvents()\n        cb()\n      })\n    })\n  }\n\n  listenToEvents() {\n    // this.socket.on('newMessage', (e) => {\n    //   if (e.data.type !== 'videoCall' && e.data.type !== 'audioCall') {\n    //     console.log('The message', e.data)\n    //     this.localNotifications.schedule({\n    //       id: 1,\n    //       title: e.data.text ? e.data.text : 'New message',\n    //       sound:  'file://sound.mp3',\n    //       text: '',\n    //       foreground: true\n    //     })\n    //   }\n\n    //   this.messageSubj.next(e)\n    // })\n    this.socket.on('newMessage', (e) => {\n      if (e.data.type !== 'videoCall' && e.data.type !== 'audioCall') {\n        console.log('The message', e.data)\n        LocalNotifications.schedule({\n          notifications:[{\n            title: e.data.text ? e.data.text : 'New message',\n            body:'',\n            id: 1,\n          }]\n          })\n      }\n\n      this.messageSubj.next(e)\n    })\n\n    this.socket.on('newCall', (e) => {\n      this.newCallSubj.next(e)\n    })\n\n    this.socket.on('rejectCall', (e) => {\n      this.rejectCallSubj.next(e)\n    })\n\n    this.socket.on('acceptCall', (e) => {\n      this.acceptCallSubj.next(e)\n    })\n\n    this.socket.on('consultationAccepted', (e) =>\n      this.consultationAcceptedSubj.next(e),\n    )\n\n    this.socket.on('consultationClosed', (e) =>\n      this.consultationClosedSubj.next(e),\n    )\n\n    this.socket.on('newConsultation', (e) => {\n\n      // this is needed to update the online status for the consultation and send it to the consultation participants \n      socket.get('/api/v1/subscribe-to-socket', {}, (resData, jwres) => { })\n\n\n      return this.newConsultationSubj.next(e)\n    })\n    this.socket.on('endCall', (e) => {\n      this.endCallSubj.next(e)\n    })\n  }\n  onMessage() {\n    return this.messageSubj\n  }\n  onCall() {\n    return this.newCallSubj\n  }\n  onRejectCall() {\n    return this.rejectCallSubj\n  }\n  onAcceptCall() {\n    return this.acceptCallSubj\n  }\n  onConsultationAccepted() {\n    return this.consultationAcceptedSubj\n  }\n  onConsultationClosed() {\n    return this.consultationClosedSubj\n  }\n  onNewConsultation() {\n    return this.newConsultationSubj\n  }\n  onEndCall() {\n    return this.endCallSubj\n  }\n\n  disconnect() {\n    if (!this.socket || !this.socket.isConnected()) {\n      return\n    }\n    return this.socket.disconnect()\n  }\n}\n","import { SharedModule } from './../shared/shared.module';\n\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n// translate\nimport { I18nModule } from '../i18n/i18n.module';\n\nimport { VideoRoomPage } from './video-room.page';\n// import { StreamComponent } from '../shared/components/stream/stream.component';\n// import { OpenViduVideoComponent } from '../shared/components/stream/ov-video.component';\nimport { ChatComponent } from '../shared/components/chat/chat.component';\n\nimport { AngularDraggableModule } from 'angular2-draggable';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VideoRoomPage\n  }\n];\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        AngularDraggableModule,\n        I18nModule,\n        SharedModule\n        // RouterModule.forChild(routes),\n    ],\n    declarations: [VideoRoomPage, ChatComponent,],\n    exports: [VideoRoomPage, ChatComponent,]\n})\nexport class VideoRoomPageModule { }\n","import { AuthService } from \"./../auth/auth.service\";\nimport { OpenViduService } from \"./../shared/services/openvidu.service\";\nimport {\n  RoomService,\n  LogService,\n  RemotePeersService,\n  Stream,\n} from \"hug-angular-lib\";\nimport { CallService } from \"./../call.service\";\nimport { OpenViduLayout } from \"../shared/layout/openvidu-layout\";\nimport { Subscription } from \"rxjs\";\nimport { ConsultationService } from \"./../consultation.service\";\n\nimport { environment } from \"./../../environments/environment\";\nimport { Component, OnInit, OnDestroy, HostListener, ViewChild, ElementRef, QueryList, ViewChildren, EventEmitter, Output, Input, NgZone, Directive } from \"@angular/core\";\n\nimport { Platform, ModalController, AlertController } from \"@ionic/angular\";\n// import { NativeAudio } from \"@awesome-cordova-plugins/native-audio/ngx\";\nimport { NativeAudio } from '@capacitor-community/native-audio'\n\n\nimport {\n  trigger,\n  keyframes,\n  state,\n  style,\n  transition,\n  animate,\n} from \"@angular/animations\";\n\nimport { SocketEventsService } from \"../socket-events.service\";\n// import { AndroidPermissions } from \"@awesome-cordova-plugins/android-permissions/ngx\";\ndeclare let window: any;\n\nexport interface Device {\n  /**\n   * `\"videoinput\"`, `\"audioinput\"`\n   */\n  kind: string;\n\n  /**\n   * Unique ID for the device. Use it on `audioSource` or `videoSource` properties of [[PublisherProperties]]\n   */\n  deviceId: string;\n\n  /**\n   * Description of the device. An empty string if the user hasn't granted permissions to the site to access the device\n   */\n  label: string;\n}\n\n@Component({\n  selector: \"app-video-room\",\n  templateUrl: \"./video-room.page.html\",\n  styleUrls: [\"./video-room.page.scss\"],\n  animations: [\n    trigger(\"slideLeftRight\", [\n      state(\n        \"in\",\n        style({\n          transform: \"translateX(0px)\",\n        })\n      ),\n      state(\n        \"out\",\n        style({\n          transform: \"translateX(100px)\",\n        })\n      ),\n      transition(\n        \"in => out\",\n        animate(\n          \"200ms\",\n          keyframes([\n            style({ transform: \"translateX(100px)\", display: \"none\" }),\n          ])\n        )\n      ),\n      transition(\n        \"out => in\",\n        animate(\"200ms\", keyframes([style({ transform: \"translateX(0px)\" })]))\n      ),\n    ]),\n    trigger(\"slideLeftRightChat\", [\n      state(\n        \"in\",\n        style({\n          transform: \"translateX(0px)\",\n        })\n      ),\n      state(\n        \"out\",\n        style({\n          transform: \"translateX(100px)\",\n        })\n      ),\n      transition(\n        \"in => out\",\n        animate(\n          \"200ms\",\n          keyframes([\n            style({ transform: \"translateX(100px)\", display: \"none\" }),\n          ])\n        )\n      ),\n      transition(\n        \"out => in\",\n        animate(\"200ms\", keyframes([style({ transform: \"translateX(0px)\" })]))\n      ),\n    ]),\n    trigger(\"slideTopBottom\", [\n      state(\n        \"in\",\n        style({\n          transform: \"translateY(0px)\",\n        })\n      ),\n      state(\n        \"out\",\n        style({\n          transform: \"translateY(100px)\",\n        })\n      ),\n      transition(\n        \"in => out\",\n        animate(\n          \"200ms\",\n          keyframes([\n            style({ transform: \"translateY(100px)\", display: \"none\" }),\n          ])\n        )\n      ),\n      transition(\n        \"out => in\",\n        animate(\"200ms\", keyframes([style({ transform: \"translateY(0px)\" })]))\n      ),\n    ]),\n  ],\n})\nexport class VideoRoomPage implements OnInit, OnDestroy {\n  BIG_ELEMENT_CLASS = \"OV_big\";\n\n  // ANDROID_PERMISSIONS = [\n  //   \"android.permission.CAMERA\",\n  //   \"android.permission.RECORD_AUDIO\",\n  //   \"android.permission.MODIFY_AUDIO_SETTINGS\",\n  // ];\n  localUser;\n  remoteUsers = [];\n  resizeTimeout;\n  bigElement;\n  consultation;\n\n  @Output() hangup = new EventEmitter<boolean>();\n  isFullScreen = true;\n\n  socketSub;\n\n  rejected;\n  @Input() message;\n  reconnectTimer;\n  @Input() sessionId: string;\n  @Input() token: string;\n  @Input() patient;\n  @Input() audioOnly;\n  @Input() videoDeviceId: string;\n  @Input() audioDeviceId: string;\n  reconnecting = false;\n  @Input() accepted = false;\n  openviduLayout;\n  openviduLayoutOptions;\n  subscriptions: Subscription[] = [];\n  peerId;\n  myCamStream: Stream;\n\n  user;\n  noWebCam;\n  buttonsVisibility;\n\n  videoDevices;\n  firstCam;\n  lastCam;\n  currentVideoDevice;\n\n  camStatus = \"on\";\n\n  videoAspectRatio = 1.777;\n\n  _device: any = \"\";\n  constructor(\n    public platform: Platform,\n    // private nativeAudio: NativeAudio,\n    private socketSer: SocketEventsService,\n    private roomService: RoomService,\n    private logger: LogService,\n    private remotePeersService: RemotePeersService,\n    private openViduSrv: OpenViduService,\n    private authService: AuthService,\n    // private androidPermissions: AndroidPermissions,\n    private zone: NgZone\n  ) {\n    window.platform = platform;\n  }\n\n  @HostListener(\"window:beforeunload\")\n  beforeunloadHandler() {\n    this.exitSession();\n  }\n\n  @HostListener(\"window:resize\", [\"$event\"])\n  sizeChange(event) {\n    clearTimeout(this.resizeTimeout);\n    this.updateLayout();\n  }\n\n  ngOnInit() {\n    console.log(\"Initialize video\", this.token, this.audioOnly);\n    if (this.message.type === \"audioCall\") {\n      this.camStatus = \"off\";\n    }\n    this.peerId = this.authService.currentUserValue.id;\n\n    if (this.accepted) {\n      this.joinToSession();\n    }\n  }\n\n  ngOnDestroy() {\n    this.exitSession();\n\n    this.subscriptions.forEach((sub) => {\n      sub.unsubscribe();\n    });\n    this.rejectCall();\n  }\n\n  joinToSession() {\n    this.logger.debug(\"Join to session\", this.token, this.sessionId);\n    this.accepted = true;\n\n    this.remoteUsers = [];\n    NativeAudio.stop({assetId: 'ringSound'}).then();\n    this.askForPerm()\n      .then(() => {\n        this.getDevices().then((devices) => {\n          console.log(\"getDevices\", devices);\n          console.log(devices);\n          this.videoDevices = devices.filter(\n            (device) => device.kind === \"videoinput\"\n          );\n          console.log(this.videoDevices);\n\n          if (this.videoDevices.length) {\n            this.firstCam = this.videoDevices[0].deviceId;\n            this.lastCam =\n              this.videoDevices[this.videoDevices.length - 1].deviceId;\n            this.currentVideoDevice = this.firstCam;\n            console.log(\"Switch camera from from\", this.currentVideoDevice);\n          } else {\n            this.currentVideoDevice = null;\n          }\n\n          this.roomService.init({ peerId: this.peerId });\n\n          this.roomService.join({\n            roomId: this.sessionId,\n            joinVideo: this.message.type !== \"audioCall\",\n            joinAudio: true,\n            token: this.token,\n          });\n\n          this.subscriptions.push(\n            this.roomService.onCamProducing.subscribe((stream) => {\n              this.logger.debug(\"Cam producing \", stream);\n\n              this.myCamStream = { ...stream };\n            })\n          );\n          this.subscriptions.push(\n            this.remotePeersService.remotePeers.subscribe((peers) => {\n              this.remoteUsers = [];\n              this.logger.debug(\"got remote peers \", peers);\n              peers.forEach((p) => {\n                this.remoteUsers.push({ ...p });\n              });\n              setTimeout(() => {\n                this.updateLayout();\n              }, 100);\n            })\n          );\n          this.openviduLayout = new OpenViduLayout();\n          this.openviduLayoutOptions = {\n            maxRatio: 3 / 2, // The narrowest ratio that will be used (default 2x3)\n            minRatio: 9 / 16, // The widest ratio that will be used (default 16x9)\n            fixedRatio:\n              false /* If this is true then the aspect ratio of the video is maintained\n        and minRatio and maxRatio are ignored (default false)*/,\n            bigClass: \"OV_big\", // The class to add to elements that should be sized bigger\n            bigPercentage: 0.9, // The maximum percentage of space the big ones should take up\n            bigFixedRatio: false, // fixedRatio for the big ones\n            bigMaxRatio: 3 / 2, // The narrowest ratio to use for the big elements (default 2x3)\n            bigMinRatio: 9 / 16, // The widest ratio to use for the big elements (default 16x9)\n            bigFirst: false, // Whether to place the big one in the top left (true) or bottom right\n            animate: true, // Whether you want to animate the transitions\n          };\n\n          this.openViduSrv\n            .acceptCall(this.sessionId, this.message.id)\n            .then((res) => {\n              this.logger.debug(\"call accepted\");\n            })\n            .catch(this.logger.error);\n\n          console.log(\n            \"layout \",\n            this.platform.is(\"ios\") ? \"ios-layout\" : \"layout\"\n          );\n          this.openviduLayout.initLayoutContainer(\n            document.getElementById(\"layout\"),\n            this.openviduLayoutOptions\n          );\n          window.openviduLayout = this.openviduLayout;\n          setTimeout(() => {\n            this.updateLayout();\n          }, 200);\n        });\n      })\n      .catch((err) => {\n        console.error(\"Error accessing camera\", err);\n        alert(\"Couldn't access camera or microphone\");\n      });\n  }\n\n  exitSession(rejoin?) {\n    this.remoteUsers = [];\n\n    this.openviduLayout = null;\n\n    if (rejoin) {\n      return this.joinToSession();\n    } else {\n      this.rejectCall();\n    }\n  }\n\n  resetVideoSize() {\n    const element = document.querySelector(\".OV_big\");\n    if (element) {\n      element.classList.remove(\"OV_big\");\n      this.bigElement = undefined;\n      this.updateLayout();\n    }\n  }\n\n  private connect(token: string): void {}\n\n  private connectWebCam(): void {}\n\n  private updateLayout() {\n    this.resizeTimeout = setTimeout(() => {\n      if (!this.openviduLayout) {\n        return;\n      }\n      console.log(\"update layout .....................................\");\n      this.openviduLayout.updateLayout();\n    }, 20);\n  }\n\n  rejectCall() {\n    console.log(\n      \"rejectCall vide -room \",\n      this.sessionId,\n      this.consultation,\n      this.message\n    );\n    if (!this.rejected) {\n      this.rejected = true;\n      if (this.accepted) {\n        this.roomService.close();\n      }\n      if (this.myCamStream) {\n        this.myCamStream.mediaStream.getTracks().forEach(function (track) {\n          track.stop();\n        });\n      }\n      this.remoteUsers = [];\n\n      this.hangup.emit(true);\n    }\n    \n    this.openViduSrv\n      .rejectCall(this.sessionId || this.consultation._id, this.message.id)\n      .then((r) => {\n        console.log(\"exit \", this.sessionId);\n      })\n      .catch((err) => {\n        console.log(\"error \", err);\n      });\n  }\n\n  toggleButtons() {}\n\n  camStatusChanged() {\n    if (this.camStatus === \"on\") {\n      this.roomService.disableWebcam();\n      this.camStatus = \"off\";\n    } else {\n      this.roomService.updateWebcam({ start: true });\n      this.camStatus = \"on\";\n    }\n  }\n\n  askForPerm() {\n    this.logger.debug(\"Ask for video permissions \");\n\n    // if (this.platform.is(\"cordova\") && this.platform.is(\"android\")) {\n    //   return this.checkAndroidPermissions();\n    // }\n    const {\n      sampleRate = 96000,\n      channelCount = 1,\n      volume = 1.0,\n      sampleSize = 16,\n      opusStereo = false,\n      opusDtx = true,\n      opusFec = true,\n      opusPtime = 20,\n      opusMaxPlaybackRate = 96000,\n    } = {};\n    const autoGainControl = false;\n    const echoCancellation = true;\n    const noiseSuppression = true;\n\n    const frameRate = 15;\n\n    const mediaPerms = {\n      audio: {\n        sampleRate,\n        channelCount,\n        // @ts-ignore\n        volume,\n        autoGainControl,\n        echoCancellation,\n        noiseSuppression,\n        sampleSize,\n      },\n      video: {\n        width: { ideal: 640 },\n        aspectRatio: this.videoAspectRatio,\n        frameRate,\n      },\n    }; \n    return navigator.mediaDevices.getUserMedia({ audio: true, video: true });\n  }\n\n  // private checkAndroidPermissions(): Promise<any> {\n  //   console.log(\"Requesting Android Permissions\");\n  //   return new Promise((resolve, reject) => {\n  //     this.platform.ready().then(() => {\n  //       this.androidPermissions\n  //         .requestPermissions(this.ANDROID_PERMISSIONS)\n  //         .then(() => {\n  //           this.androidPermissions\n  //             .checkPermission(this.androidPermissions.PERMISSION.CAMERA)\n  //             .then((camera) => {\n  //               this.androidPermissions\n  //                 .checkPermission(\n  //                   this.androidPermissions.PERMISSION.RECORD_AUDIO\n  //                 )\n  //                 .then((audio) => {\n  //                   this.androidPermissions\n  //                     .checkPermission(\n  //                       this.androidPermissions.PERMISSION.MODIFY_AUDIO_SETTINGS\n  //                     )\n  //                     .then((modifyAudio) => {\n  //                       if (\n  //                         camera.hasPermission &&\n  //                         audio.hasPermission &&\n  //                         modifyAudio.hasPermission\n  //                       ) {\n  //                         resolve(null);\n  //                       } else {\n  //                         reject(\n  //                           new Error(\n  //                             \"Permissions denied: \" +\n  //                               \"\\n\" +\n  //                               \" CAMERA = \" +\n  //                               camera.hasPermission +\n  //                               \"\\n\" +\n  //                               \" AUDIO = \" +\n  //                               audio.hasPermission +\n  //                               \"\\n\" +\n  //                               \" AUDIO_SETTINGS = \" +\n  //                               modifyAudio.hasPermission\n  //                           )\n  //                         );\n  //                       }\n  //                     })\n  //                     .catch((err) => {\n  //                       console.error(\n  //                         \"Checking permission \" +\n  //                           this.androidPermissions.PERMISSION\n  //                             .MODIFY_AUDIO_SETTINGS +\n  //                           \" failed\"\n  //                       );\n  //                       reject(err);\n  //                     });\n  //                 })\n  //                 .catch((err) => {\n  //                   console.error(\n  //                     \"Checking permission \" +\n  //                       this.androidPermissions.PERMISSION.RECORD_AUDIO +\n  //                       \" failed\"\n  //                   );\n  //                   reject(err);\n  //                 });\n  //             })\n  //             .catch((err) => {\n  //               console.error(\n  //                 \"Checking permission \" +\n  //                   this.androidPermissions.PERMISSION.CAMERA +\n  //                   \" failed\"\n  //               );\n  //               reject(err);\n  //             });\n  //         })\n  //         .catch((err) => console.error(\"Error requesting permissions: \", err));\n  //     });\n  //   });\n  // }\n\n  toggleFullScreen() {\n    this.isFullScreen = !this.isFullScreen;\n    setTimeout(() => {\n      this.updateLayout();\n    }, 200);\n  }\n\n  /**\n   * Collects information about the media input devices available on the system.\n   *  You can pass property `deviceId` of a [[Device]] object as value of `audioSource`\n   * or `videoSource` properties in [[initPublisher]] method\n   */\n  getDevices(): Promise<Device[]> {\n    return new Promise<Device[]>((resolve, reject) => {\n      navigator.mediaDevices\n        .enumerateDevices()\n        .then((deviceInfos) => {\n          const devices: Device[] = [];\n\n          // Ionic Android  devices\n          if (\n            this.platform.is(\"cordova\") && \n            this.platform.is(\"android\") &&\n            window.cordova &&\n            window.cordova.plugins &&\n            (window.cordova.plugins as any).EnumerateDevicesPlugin\n          ) {\n            console.log(\"Running this code because we are on Android native\");\n            (\n              window.cordova.plugins as any\n            ).EnumerateDevicesPlugin.getEnumerateDevices().then(\n              (pluginDevices: Device[]) => {\n                let pluginAudioDevices: Device[] = [];\n                let videoDevices: Device[] = [];\n                let audioDevices: Device[] = [];\n                pluginAudioDevices = pluginDevices.filter(\n                  (device: Device) => device.kind === \"audioinput\"\n                );\n                videoDevices = deviceInfos.filter(\n                  (device: Device) => device.kind === \"videoinput\"\n                );\n                audioDevices = deviceInfos.filter(\n                  (device: Device) => device.kind === \"audioinput\"\n                );\n                videoDevices.forEach((deviceInfo, index) => {\n                  if (!deviceInfo.label) {\n                    let label = \"\";\n                    if (index === 0) {\n                      label = \"Front Camera\";\n                    } else if (index === 1) {\n                      label = \"Back Camera\";\n                    } else {\n                      label = \"Unknown Camera\";\n                    }\n                    devices.push({\n                      kind: deviceInfo.kind,\n                      deviceId: deviceInfo.deviceId,\n                      label: label,\n                    });\n                  } else {\n                    devices.push({\n                      kind: deviceInfo.kind,\n                      deviceId: deviceInfo.deviceId,\n                      label: deviceInfo.label,\n                    });\n                  }\n                });\n                audioDevices.forEach((deviceInfo, index) => {\n                  if (!deviceInfo.label) {\n                    let label = \"\";\n                    switch (index) {\n                      case 0: // Default Microphone\n                        label = \"Default\";\n                        break;\n                      case 1: // Microphone + Speakerphone\n                        const defaultMatch = pluginAudioDevices.filter((d) =>\n                          d.label.includes(\"Built\")\n                        )[0];\n                        label = defaultMatch\n                          ? defaultMatch.label\n                          : \"Built-in Microphone\";\n                        break;\n                      case 2: // Headset Microphone\n                        const wiredMatch = pluginAudioDevices.filter((d) =>\n                          d.label.includes(\"Wired\")\n                        )[0];\n                        if (wiredMatch) {\n                          label = wiredMatch.label;\n                        } else {\n                          label = \"Headset earpiece\";\n                        }\n                        break;\n                      case 3:\n                        const wirelessMatch = pluginAudioDevices.filter((d) =>\n                          d.label.includes(\"Bluetooth\")\n                        )[0];\n                        label = wirelessMatch\n                          ? wirelessMatch.label\n                          : \"Wireless\";\n                        break;\n                      default:\n                        label = \"Unknown Microphone\";\n                        break;\n                    }\n                    devices.push({\n                      kind: deviceInfo.kind,\n                      deviceId: deviceInfo.deviceId,\n                      label: label,\n                    });\n                  } else {\n                    devices.push({\n                      kind: deviceInfo.kind,\n                      deviceId: deviceInfo.deviceId,\n                      label: deviceInfo.label,\n                    });\n                  }\n                });\n                resolve(devices);\n              }\n            );\n          } else {\n            // Rest of platforms\n            deviceInfos.forEach((deviceInfo) => {\n              if (\n                deviceInfo.kind === \"audioinput\" ||\n                deviceInfo.kind === \"videoinput\"\n              ) {\n                devices.push({\n                  kind: deviceInfo.kind,\n                  deviceId: deviceInfo.deviceId,\n                  label: deviceInfo.label,\n                });\n              }\n            });\n            resolve(devices);\n          }\n        })\n        .catch((error) => {\n          console.error(\"Error getting devices\", error);\n          reject(error);\n        });\n    });\n  }\n\n  toggleCamera() {\n    // this.session.disconnect();\n    console.log(\"Switch camera from\", this.currentVideoDevice);\n    if (this.currentVideoDevice === this.firstCam) {\n      this.currentVideoDevice = this.lastCam;\n    } else {\n      this.currentVideoDevice = this.firstCam;\n    }\n    console.log(\"Switch camera to\", this.currentVideoDevice);\n\n    this.roomService\n      .updateWebcam({ restart: true, newDeviceId: this.currentVideoDevice })\n      .then(() => {\n        console.log(\"Webcam updated \");\n      })\n      .catch((error) => {\n        console.error(\"Error updating devices\", error);\n      });\n  }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\nexport const environment = {\n  production: false,\n  api: \"/api/v1\",\n  host:  \"https://patient_hcw-athome.dev.oniabsis.com\",\n  //host: \"http://localhost:1337\",\n\n  //host: 'https://' + document.location.host,\n\n  showNativeAppSuggestionAndroid: true,\n  showNativeAppSuggestionIOS: true,\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","// localStorage.debug = '*'\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nimport { defineCustomElements } from '@ionic/pwa-elements/loader';\n\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\ndefineCustomElements(window);","var map = {\n\t\"./ion-accordion_2.entry.js\": [\n\t\t79,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-accordion_2_entry_js\"\n\t],\n\t\"./ion-action-sheet.entry.js\": [\n\t\t5593,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-action-sheet_entry_js\"\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t3225,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-alert_entry_js\"\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t4812,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-app_8_entry_js\"\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t6655,\n\t\t\"node_modules_ionic_core_dist_esm_ion-avatar_3_entry_js\"\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t4856,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-back-button_entry_js\"\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t3059,\n\t\t\"node_modules_ionic_core_dist_esm_ion-backdrop_entry_js\"\n\t],\n\t\"./ion-breadcrumb_2.entry.js\": [\n\t\t8648,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-breadcrumb_2_entry_js\"\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t8308,\n\t\t\"node_modules_ionic_core_dist_esm_ion-button_2_entry_js\"\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t4690,\n\t\t\"node_modules_ionic_core_dist_esm_ion-card_5_entry_js\"\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t4090,\n\t\t\"node_modules_ionic_core_dist_esm_ion-checkbox_entry_js\"\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t6214,\n\t\t\"node_modules_ionic_core_dist_esm_ion-chip_entry_js\"\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t9447,\n\t\t\"node_modules_ionic_core_dist_esm_ion-col_3_entry_js\"\n\t],\n\t\"./ion-datetime-button.entry.js\": [\n\t\t7950,\n\t\t\"default-node_modules_ionic_core_dist_esm_parse-1c2207b2_js-node_modules_ionic_core_dist_esm_t-5248a4\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime-button_entry_js\"\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t9689,\n\t\t\"default-node_modules_ionic_core_dist_esm_parse-1c2207b2_js-node_modules_ionic_core_dist_esm_t-5248a4\",\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-datetime_3_entry_js\"\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t8840,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-fab_3_entry_js\"\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t749,\n\t\t\"node_modules_ionic_core_dist_esm_ion-img_entry_js\"\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t9667,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js\"\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t3288,\n\t\t\"node_modules_ionic_core_dist_esm_ion-input_entry_js\"\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t5473,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item-option_3_entry_js\"\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t3634,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-item_8_entry_js\"\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t2855,\n\t\t\"node_modules_ionic_core_dist_esm_ion-loading_entry_js\"\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t495,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-menu_3_entry_js\"\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t8737,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-modal_entry_js\"\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t9632,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-nav_2_entry_js\"\n\t],\n\t\"./ion-picker-column-internal.entry.js\": [\n\t\t4446,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-column-internal_entry_js\"\n\t],\n\t\"./ion-picker-internal.entry.js\": [\n\t\t2275,\n\t\t\"node_modules_ionic_core_dist_esm_ion-picker-internal_entry_js\"\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t8050,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-popover_entry_js\"\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t8994,\n\t\t\"node_modules_ionic_core_dist_esm_ion-progress-bar_entry_js\"\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t3592,\n\t\t\"node_modules_ionic_core_dist_esm_ion-radio_2_entry_js\"\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t5454,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-range_entry_js\"\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t290,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-refresher_2_entry_js\"\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t2666,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-reorder_2_entry_js\"\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t2208,\n\t\t\"node_modules_ionic_core_dist_esm_ion-ripple-effect_entry_js\"\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t5534,\n\t\t\"node_modules_ionic_core_dist_esm_ion-route_4_entry_js\"\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t4902,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-searchbar_entry_js\"\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t1938,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-segment_2_entry_js\"\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t4832,\n\t\t\"node_modules_ionic_core_dist_esm_ion-select_3_entry_js\"\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t668,\n\t\t\"node_modules_ionic_core_dist_esm_ion-slide_2_entry_js\"\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t1624,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-spinner_entry_js\"\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t9989,\n\t\t\"node_modules_ionic_core_dist_esm_ion-split-pane_entry_js\"\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t8902,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab-bar_2_entry_js\"\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t199,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-tab_2_entry_js\"\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t8395,\n\t\t\"node_modules_ionic_core_dist_esm_ion-text_entry_js\"\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t6357,\n\t\t\"node_modules_ionic_core_dist_esm_ion-textarea_entry_js\"\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t8268,\n\t\t\"node_modules_ionic_core_dist_esm_ion-toast_entry_js\"\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t5269,\n\t\t\"common\",\n\t\t\"node_modules_ionic_core_dist_esm_ion-toggle_entry_js\"\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t2875,\n\t\t\"node_modules_ionic_core_dist_esm_ion-virtual-scroll_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 863;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./pwa-action-sheet.entry.js\": [\n\t\t5464,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-action-sheet_entry_js\"\n\t],\n\t\"./pwa-camera-modal-instance.entry.js\": [\n\t\t8724,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera-modal-instance_entry_js\"\n\t],\n\t\"./pwa-camera-modal.entry.js\": [\n\t\t8145,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera-modal_entry_js\"\n\t],\n\t\"./pwa-camera.entry.js\": [\n\t\t527,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-camera_entry_js\"\n\t],\n\t\"./pwa-toast.entry.js\": [\n\t\t4389,\n\t\t\"node_modules_ionic_pwa-elements_dist_esm_pwa-toast_entry_js\"\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(() => {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(() => {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = () => (Object.keys(map));\nwebpackAsyncContext.id = 5899;\nmodule.exports = webpackAsyncContext;","/* (ignored) */"],"names":["GlobalVariableService","Component","NgZone","Platform","SplashScreen","CallService","SocketEventsService","ConsultationService","AuthService","NativeAudio","NavigationEnd","Router","File","App","filter","AppComponent","constructor","platform","callService","authService","socketEventsService","consultationService","zone","file","router","globalVariableService","parsedUrl","URL","window","location","href","console","log","inviteToken","searchParams","get","match","testRoute","includes","events","pipe","event","subscribe","ngOnInit","init","then","user","currentUser","initServices","initializeApp","catch","err","loggedInSub","redirectToLogin","redirected","navigate","queryParams","invite","redirectToTestPage","redirectToAwaitConsultation","isNativeApp","is","addListener","data","url","token","test","localStorage","getItem","logout","setItem","setInviteToken","script2","document","createElement","type","async","head","appendChild","clear","ready","hide","cordova","plugins","iosrtc","registerGlobals","error","notificationFile","preload","assetId","assetPath","audioChannelNum","isUrl","r","getCall","e","consultation","id","_id","callRunning","androidWakeUp","backgroundMode","overrideBackButton","wakeUp","moveToForeground","unlock","disable","selector","template","_b","Object","_c","_d","_e","_f","_g","_h","_j","Input","ModalController","DomSanitizer","FilePicker","Camera","CameraResultType","CameraSource","TranslateService","ChooseAttachmentComponent","modalController","sanitizer","translate","currentUserValue","pickFiles","result","types","multiple","chooseFile","uri","dismiss","files","filePath","takePicture","image","getPhoto","quality","allowEditing","resultType","DataUrl","source","Prompt","promptLabelPhoto","instant","promptLabelPicture","photo","bypassSecurityTrustResourceUrl","dataUrl","chooseFileBrowser","Promise","resolve","reject","inputElement","getElementById","addEventListener","click","Injectable","Subject","LocalNotifications","io","sailsIOClient","sailsIo","sails","autoConnect","cb","socket","isConnected","disconnect","query","headers","connect","getHostValue","reconnection","reconnectionDelay","reconnectionDelayMax","on","resData","jwres","listenToEvents","reconnect","schedule","notifications","title","text","body","messageSubj","next","newCallSubj","rejectCallSubj","acceptCallSubj","consultationAcceptedSubj","consultationClosedSubj","newConsultationSubj","endCallSubj","onMessage","onCall","onRejectCall","onAcceptCall","onConsultationAccepted","onConsultationClosed","onNewConsultation","onEndCall","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[27,28,29]}