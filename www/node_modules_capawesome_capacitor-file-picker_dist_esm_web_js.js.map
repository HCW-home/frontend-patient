{"version":3,"file":"node_modules_capawesome_capacitor-file-picker_dist_esm_web_js.js","mappings":"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","sources":["./node_modules/@capawesome/capacitor-file-picker/dist/esm/web.js"],"sourcesContent":["import { WebPlugin } from '@capacitor/core';\nexport class FilePickerWeb extends WebPlugin {\n    constructor() {\n        super(...arguments);\n        this.ERROR_PICK_FILE_CANCELED = 'pickFiles canceled.';\n    }\n    async pickFiles(options) {\n        const pickedFiles = await this.openFilePicker(options);\n        if (!pickedFiles) {\n            throw new Error(this.ERROR_PICK_FILE_CANCELED);\n        }\n        const result = {\n            files: [],\n        };\n        for (const pickedFile of pickedFiles) {\n            const file = {\n                path: undefined,\n                name: this.getNameFromUrl(pickedFile),\n                mimeType: this.getMimeTypeFromUrl(pickedFile),\n                size: this.getSizeFromUrl(pickedFile),\n                blob: pickedFile,\n            };\n            if (options === null || options === void 0 ? void 0 : options.readData) {\n                file.data = await this.getDataFromFile(pickedFile);\n            }\n            result.files.push(file);\n        }\n        return result;\n    }\n    async openFilePicker(options) {\n        var _a;\n        const accept = ((_a = options === null || options === void 0 ? void 0 : options.types) === null || _a === void 0 ? void 0 : _a.join(',')) || '';\n        const multiple = !!(options === null || options === void 0 ? void 0 : options.multiple);\n        return new Promise(resolve => {\n            let onChangeFired = false;\n            const input = document.createElement('input');\n            input.type = 'file';\n            input.accept = accept;\n            input.multiple = multiple;\n            input.addEventListener('change', () => {\n                onChangeFired = true;\n                const files = Array.from(input.files || []);\n                resolve(files);\n            }, { once: true });\n            // Workaround to detect when Cancel is selected in the File Selection dialog box.\n            window.addEventListener('focus', async () => {\n                await this.wait(1000);\n                if (onChangeFired) {\n                    return;\n                }\n                resolve(undefined);\n            }, { once: true });\n            input.click();\n        });\n    }\n    async getDataFromFile(file) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = () => {\n                const result = typeof reader.result === 'string' ? reader.result : '';\n                const splittedResult = result.split('base64,');\n                const base64 = splittedResult[1] || '';\n                resolve(base64);\n            };\n            reader.onerror = error => {\n                reject(error);\n            };\n        });\n    }\n    getNameFromUrl(file) {\n        return file.name;\n    }\n    getMimeTypeFromUrl(file) {\n        return file.type;\n    }\n    getSizeFromUrl(file) {\n        return file.size;\n    }\n    async wait(delayMs) {\n        return new Promise(resolve => setTimeout(resolve, delayMs));\n    }\n}\n"],"names":["WebPlugin","FilePickerWeb","constructor","arguments","ERROR_PICK_FILE_CANCELED","pickFiles","options","pickedFiles","openFilePicker","Error","result","files","pickedFile","file","path","undefined","name","getNameFromUrl","mimeType","getMimeTypeFromUrl","size","getSizeFromUrl","blob","readData","data","getDataFromFile","push","_a","accept","types","join","multiple","Promise","resolve","onChangeFired","input","document","createElement","type","addEventListener","Array","from","once","window","wait","click","reject","reader","FileReader","readAsDataURL","onload","splittedResult","split","base64","onerror","error","delayMs","setTimeout"],"sourceRoot":"webpack:///","x_google_ignoreList":[0]}