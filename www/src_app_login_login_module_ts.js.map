{"version":3,"file":"src_app_login_login_module_ts.js","mappings":"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","sources":["./src/app/invite.service.ts","./src/app/login/login.module.ts","./src/app/login/login.page.ts","./src/app/login/translator-form/translator-form.component.ts","./src/app/select-language/select-language.component.ts","./src/app/translator.service.ts"],"sourcesContent":["import { GlobalVariableService } from './global-variable.service';\nimport { Injectable } from '@angular/core';\nimport { HttpClient, } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InviteService {\n\n  constructor(\n    private http: HttpClient,\n    private globalVariableService: GlobalVariableService\n  ) { }\n\n  getInviteFromToken(token) {\n    return this.http.get<any>(this.globalVariableService.getApiPath() + '/invite/by-token/' + token);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\n// translate\nimport { I18nModule } from '../i18n/i18n.module';\nimport { SelectLanguageComponent } from '../select-language/select-language.component';\n\nimport { LoginPage } from './login.page';\nimport { TranslatorFormComponent } from './translator-form/translator-form.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    I18nModule,\n    ReactiveFormsModule,\n    FormsModule,\n\n  ],\n\n  declarations: [\n    LoginPage,\n    SelectLanguageComponent,\n    TranslatorFormComponent\n  ],\n  exports:[\n    TranslatorFormComponent\n  ]\n})\nexport class LoginPageModule { }\n","import { TranslatorService } from \"./../translator.service\";\nimport { environment } from \"./../../environments/environment\";\nimport { InviteService } from \"./../invite.service\";\nimport { Subscription } from \"rxjs\";\n\nimport { Component, OnInit, NgZone, Directive } from \"@angular/core\";\nimport { Platform } from \"@ionic/angular\";\nimport { DomSanitizer, SafeUrl } from \"@angular/platform-browser\";\nimport { DatePipe } from \"@angular/common\";\n\nimport { TranslateService } from \"@ngx-translate/core\";\nimport { RoomService } from \"hug-angular-lib\";\nimport { Router, ActivatedRoute } from \"@angular/router\";\ndeclare let cordova: any;\ndeclare let window: any;\nimport { AuthService } from \"../auth/auth.service\";\nimport { ConsultationService } from \"../consultation.service\";\nimport { access } from \"fs\";\nimport { ConfigService } from \"../config.service\";\nimport { SocketEventsService } from \"../socket-events.service\";\nimport { App } from '@capacitor/app';\n\nconst coeff = 1000 * 60 * 5;\n\n// get token from url or input or observable\n// get invite\n// if invite is shcedueled and it's for patient show time\n// login invite\n// handle user\n\n@Component({\n  providers: [DatePipe],\n  selector: \"app-login\",\n  templateUrl: \"./login.page.html\",\n  styleUrls: [\"./login.page.scss\"],\n})\nexport class LoginPage implements OnInit {\n  currentUser;\n  subInviteToken;\n  loading = false;\n  submitted = false;\n  returnUrl: string;\n  error = \"\";\n  email: string;\n  password: string;\n  connectionErrorMessage =\n    \"Le serveur distant n'est pas joinable, veuillez vérifier votre connectivité\";\n  inviteToken = \"\";\n  inviteKey = \"\";\n  invalidInvite = false;\n  inviteKeyError = \"\";\n  birthDate = \"\";\n  birthError = \"\";\n  invite = null;\n\n  translator;\n  isScheduled = false;\n  icsBlob: SafeUrl;\n  scheduledFor;\n  // Whether or not to display the mobile landing screen\n  mobileLandScreen = false;\n  subscriptions: Subscription[] = [];\n  allowConsultationTimer;\n\n  scheduledForRounded;\n  showTranslatorConfirmation = false;\n  noInviteError = false;\n  noTokenProvided = false;\n  translationRequestRefused = false;\n  showNativeAppSuggestionAndroid = environment.showNativeAppSuggestionAndroid;\n  showNativeAppSuggestionIOS = environment.showNativeAppSuggestionIOS;\n\n  translatorAcceptError;\n\n  constructor(\n    private authService: AuthService,\n    private route: ActivatedRoute,\n    private router: Router,\n    private conServ: ConsultationService,\n    public platform: Platform,\n    private inviteService: InviteService,\n    private sanitizer: DomSanitizer,\n    private datePipe: DatePipe,\n    private zone: NgZone,\n    private translate: TranslateService,\n    private translatorServ: TranslatorService,\n    public configService: ConfigService,\n    private socketService: SocketEventsService,\n    public roomService: RoomService\n  ) {\n    this.connectionErrorMessage = translate.instant(\n      \"login.theRemoteServerIsNotReachable\"\n    );\n  }\n\n  ngAfterContentInit() {\n    console.log(\"ngAfterContentInit\");\n    const inviteToken = localStorage.getItem(\"inviteToken\");\n    if (this.inviteToken !== inviteToken || this.inviteKey !== inviteToken) {\n      this.inviteToken = inviteToken;\n      this.inviteKey = this.inviteToken;\n    }\n  }\n  ngOnInit() {\n    const showNativeAppSuggestion =\n      (this.platform.is(\"ios\") && environment.showNativeAppSuggestionIOS) ||\n      (this.platform.is(\"android\") &&\n        environment.showNativeAppSuggestionAndroid);\n\n    this.mobileLandScreen =\n      this.platform.is(\"mobile\") &&\n      (this.platform.is(\"ios\") || this.platform.is(\"android\")) &&\n      showNativeAppSuggestion;\n\n    this.init();\n\n    this.subscriptions.push(\n      this.authService.currentUser.subscribe((user) => {\n        this.currentUser = user;\n      })\n    );\n  }\n\n  async init() {\n    console.log(\"init login\");\n\n    this.inviteToken = this.inviteToken || localStorage.getItem(\"inviteToken\");\n    this.currentUser = this.authService.currentUserValue;\n\n    console.log(this.inviteToken, this.currentUser);\n    if (this.inviteToken && this.inviteToken.length) {\n      this.handleToken(this.inviteToken);\n    } else if (this.platform.is(\"mobile\")) {\n      console.log(\"No invite ...\");\n      this.noInviteError = true;\n      this.noTokenProvided = true;\n      if (this.authService.currentUserValue) {\n        console.log(\n          \"Logout because there is a user and no invite token on init\"\n        );\n        await this.authService.logout();\n      }\n    }\n\n    console.log(\"[LOGIN] Invite token: \" + this.inviteToken);\n    this.returnUrl = this.route.snapshot.queryParams.returnUrl || \"\";\n\n    this.subscriptions.push(\n      this.authService.observeInviteToken().subscribe((inviteToken) => {\n        console.log(\"GOT inviteToken in login \");\n        this.inviteToken = inviteToken;\n        this.handleToken(this.inviteToken);\n      })\n    );\n  }\n  handleUser(user) {\n    console.log(\"HANDLE user>>>>>>>>>>>>>\", user);\n    this.currentUser = user;\n    // Check if the client was in a consultation\n    const consultationId = localStorage.getItem(\"currentConsultation\");\n    const videoCallTested = localStorage.getItem(\"videoCallTested\");\n\n    if (consultationId) {\n      return this.handleConsultation(consultationId);\n    } else {\n      if (videoCallTested) {\n        // create consultation\n        this.conServ\n          .createConsultation({\n            queue: \"covid19\",\n            gender: \"unknown\",\n            IMADTeam: \"none\",\n            invitationToken: this.inviteToken,\n          })\n          .toPromise()\n          .then((consultation) => {\n            console.log(\"Consultation created \", consultation);\n            if (!consultation) {\n              return this.router.navigate([\"await-consultation\"]);\n            }\n            localStorage.setItem(\"currentConsultation\", consultation.id);\n            this.handleConsultation(consultation.id);\n          })\n          .catch((err) => {\n            console.log(\"Error creating consultation\", err);\n            this.handleTokenError(err);\n          })\n          .finally(() => {\n            this.submitted = false;\n            this.loading = false;\n          });\n      } else {\n        console.log(\"Naviage to test\");\n        return this.router.navigate([\"test-call\"]);\n      }\n    }\n  }\n\n  handleConsultation(consultationId) {\n    console.log(\"Handle consultation \", consultationId);\n    const videoCallTested = localStorage.getItem(\"videoCallTested\");\n    if (videoCallTested) {\n      return this.router.navigate([\"consultation\", consultationId]);\n    } else {\n      return this.router.navigate([\"test-call\"]);\n    }\n  }\n\n  handleToken(inviteToken, accept = false) {\n    console.log(\"HAndle token .........\", this.inviteToken);\n    this.zone.run(() => {\n      this.noTokenProvided = false;\n    });\n    this.inviteToken = inviteToken;\n    this.inviteKey = inviteToken;\n\n    // get invite\n    this.subscriptions.push(\n      this.inviteService.getInviteFromToken(this.inviteToken).subscribe(\n        (invite) => {\n          this.invite = invite;\n\n          this.handleInvite(invite, accept);\n        },\n        (err) => this.handleTokenError(err)\n      )\n    );\n  }\n\n  async handleInvite(invite, accept?) {\n    console.log(\"handle invite.................\", invite, invite.status);\n    console.log(\"current user \", this.currentUser);\n    this.invite = invite;\n    const lang = window.localStorage.getItem(\"hhp-lang\");\n    this.translate.use(lang);\n    /**\n    if (invite.patientLanguage) {\n      if (this.translate.getLangs().includes(invite.patientLanguage)) {\n        this.translate.use(invite.patientLanguage);\n        window.localStorage.setItem(\"hhp-lang\", invite.patientLanguage);\n      } else {\n        this.translate.use(\"fr\");\n        window.localStorage.setItem(\"hhp-lang\", \"fr\");\n      }\n    }\n     */\n\n    if (this.currentUser) {\n      if (this.currentUser.inviteToken === this.invite.id) {\n        if (invite.type === \"TRANSLATOR_REQUEST\") {\n          return;\n        }\n\n        return this.handleUser(this.currentUser);\n      } else {\n        console.log(\n          \"Logout because there is a user and invite token don't match\"\n        );\n        await this.authService.logout();\n        localStorage.setItem(\"inviteToken\", this.inviteToken);\n        this.noInviteError = null;\n      }\n    } else if (\n      invite.status === \"ACCEPTED\" ||\n      invite.status === \"REFUSED\" ||\n      invite.status === \"CANCELED\"\n    ) {\n      this.handleTokenError(\"Invite status \" + invite.status);\n      return;\n    } else {\n      this.noInviteError = false;\n      this.zone.run(() => {\n        console.log(\"No error \");\n\n        this.noInviteError = false;\n      });\n      setTimeout(() => {\n        console.log(\"No error \");\n\n        this.noInviteError = false;\n      }, 100);\n      console.log(\"DISCONNECT WEBSOCKET IF CONNECTED\");\n      this.socketService.disconnect();\n    }\n\n    if (accept) {\n      this.acceptInvite(invite);\n    }\n    // handle user\n  }\n\n  acceptInvite(invite) {\n    if (invite.type === \"TRANSLATOR_REQUEST\") {\n      return;\n    }\n\n    if (invite.scheduledFor - Date.now() > 10 * 60 * 1000) {\n      this.isScheduled = true;\n      this.scheduledFor = new Date(invite.scheduledFor);\n      this.scheduledForRounded = new Date(\n        Math.round(this.scheduledFor.getTime() / coeff) * coeff\n      );\n      this.icsBlob = this.generateIcsBlob(this.scheduledFor);\n      this.setAllowConsultationTimer(invite);\n    } else {\n      this.authService\n        .loginWithInvite(this.inviteToken, this.birthDate, this.translator)\n        .toPromise()\n        .then((user) => this.handleUser(user))\n        .catch((err) => {\n          this.handleTokenError(err);\n        });\n    }\n  }\n  handleTokenError(err?) {\n    console.error(\"Handle token error \", err);\n    setTimeout(() => {\n      this.noInviteError = true;\n    }, 100);\n\n    console.log(\"Logout because of token error \", err);\n    this.authService.logout();\n    // localStorage.clear()\n  }\n\n  onSubmit() {\n    if (this.submitted) {\n      return;\n    }\n    if (!this.inviteToken && !this.inviteKey) {\n      this.inviteKeyError = this.translate.instant(\n        \"login.pleaseEnterYourInvitationKey\"\n      );\n    } else {\n      this.inviteKeyError = \"\";\n    }\n\n    if (this.inviteKeyError || this.birthError) {\n      return;\n    }\n\n    this.submitted = true;\n    this.loading = true;\n\n    const inviteToken = this.inviteToken ? this.inviteToken : this.inviteKey;\n    console.log(inviteToken);\n    localStorage.setItem(\"inviteToken\", inviteToken);\n\n    this.loading = false;\n    this.submitted = false;\n\n    //console.log(\"SET LOADING FALSE AVEC\");\n    // Prevent loading issue not reverted when coming back to this page\n    /*setTimeout(() => {\n      this.zone.run(() => {\n        console.log(\"SET LOADING FALSE AVEC 5s\");\n        this.loading = false;\n        this.submitted = false;\n      });\n    }, 3000);\n    */\n\n    this.handleToken(inviteToken, true);\n  }\n\n  translatorSubmit(translator) {\n    this.loading = true;\n    console.log(\"On translator submit\", translator, this.inviteToken, this);\n    this.translator = translator;\n\n    this.subscriptions.push(\n      this.translatorServ.acceptRequest(this.inviteToken, translator).subscribe(\n        (res) => {\n          console.log(\"accepted \", res, this.showTranslatorConfirmation);\n          this.zone.run(() => {\n            this.translationRequestRefused = false;\n            this.showTranslatorConfirmation = true;\n          });\n\n          this.loading = false;\n          this.invite = null;\n          this.inviteKey = null;\n          this.inviteToken = null;\n          localStorage.removeItem(\"inviteToken\");\n        },\n        (err) => {\n          this.loading = false;\n          console.log(\"error accepting request \", err);\n          this.translatorAcceptError = err.error\n            ? err.error.error || err.error\n            : err;\n\n          if (\n            (this.translatorAcceptError &&\n              this.translatorAcceptError.name === \"ERROR_INVITE_ACCEPTED\") ||\n            (this.translatorAcceptError &&\n              this.translatorAcceptError.name === \"ERROR_NO_INVITE\")\n          ) {\n            localStorage.removeItem(\"inviteToken\");\n            this.invite = null;\n            this.inviteKey = null;\n            this.inviteToken = null;\n          }\n        }\n      )\n    );\n  }\n\n  translatorRefused() {\n    this.loading = true;\n    this.subscriptions.push(\n      this.translatorServ.refuseRequest(this.inviteToken).subscribe((res) => {\n        this.loading = false;\n        this.invite = null;\n        this.inviteKey = null;\n        this.inviteToken = null;\n        localStorage.removeItem(\"inviteToken\");\n        this.showTranslatorConfirmation = true;\n        this.translationRequestRefused = true;\n      })\n    );\n  }\n  setAllowConsultationTimer(invite) {\n    const inviteToken = this.inviteToken ? this.inviteToken : this.inviteKey;\n    this.allowConsultationTimer = setTimeout(() => {\n      this.isScheduled = false;\n      this.loginInvite(inviteToken);\n    }, invite.scheduledFor - 10 * 60 * 1000 - Date.now());\n    console.log(\n      \"timer set for \",\n      new Date(invite.scheduledFor - 10 * 60 * 1000)\n    );\n  }\n\n  loginInvite(inviteToken) {\n    const videoCallTested = localStorage.getItem(\"videoCallTested\");\n    if (videoCallTested) {\n      this.authService\n        .loginWithInvite(inviteToken, this.birthDate, this.translator)\n        .toPromise()\n        .then((user) => {\n          if (user.role === \"translator\") {\n            return this.router.navigate([\"await-consultation\"]);\n          }\n\n          return this.conServ\n            .createConsultation({\n              queue: \"covid19\",\n              gender: \"unknown\",\n              IMADTeam: \"none\",\n              invitationToken: inviteToken,\n            })\n            .toPromise();\n        })\n        .then((consultation) => {\n          localStorage.setItem(\"currentConsultation\", consultation.id);\n          this.router.navigate([\"consultation\", consultation.id]);\n          // this.router.navigate(['test-call']);\n        })\n        .catch((err) => {\n          console.log(err);\n          // alert(err);\n          this.noInviteError = true;\n        })\n        .finally(() => {\n          this.submitted = false;\n          this.loading = false;\n        });\n    } else {\n      this.authService\n        .loginWithInvite(inviteToken, this.birthDate, this.translator)\n        .toPromise()\n        .then((user) => {\n          this.router.navigate([\"test-call\"]);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }\n  ngOnDestroy() {\n    if (this.subInviteToken) {\n      this.subInviteToken.unsubscribe();\n    }\n    this.subscriptions.forEach((subscription) => {\n      subscription.unsubscribe();\n    });\n    clearInterval(this.allowConsultationTimer);\n  }\n\n  openApp() {\n    if (this.platform.is(\"android\")) {\n      this.openAndroidApp();\n    } else {\n      const url = this.getCurrentUrl();\n      console.log(\"Trying to open \", url);\n      window.location.href = url;\n    }\n  }\n  openAndroidApp() {\n    const inviteToken = this.inviteToken ? this.inviteToken : this.inviteKey;\n\n    if (inviteToken) {\n      const url =\n        \"hugathome\" +\n        \"://\" +\n        window.location.host +\n        (inviteToken ? \"?invite=\" + inviteToken : \"\") +\n        \"&scheme=\" +\n        window.location.protocol;\n\n      console.log(\"try top open\" + url);\n      // debugger;\n      window.location.replace(url);\n    }\n  }\n  getCurrentUrl() {\n    const inviteToken = this.inviteToken ? this.inviteToken : this.inviteKey;\n    return (\n      window.location.protocol +\n      \"//\" +\n      window.location.host +\n      (inviteToken ? \"?invite=\" + inviteToken : \"\")\n    );\n  }\n\n  clearError() {\n    this.noInviteError = false;\n    localStorage.clear();\n    this.inviteToken = null\n    this.inviteKey = null\n  }\n\n  closeLandingScreen() {\n    console.log(\"closeLandingScreen\");\n    console.log(this.inviteToken);\n    // this.mobileLandScreen = false;\n    if (this.inviteToken && this.inviteToken.length) {\n      this.onSubmit();\n    } else {\n      this.noInviteError = true;\n    }\n  }\n\n  closeApp() {\n    localStorage.clear();\n    App.exitApp();\n  }\n\n  /**\n   * Check if the user is running on mobile (either web or native app).\n   */\n  isMobileUser() {\n    return this.platform.is('ios') || this.platform.is('android');\n  }\n\n  /**\n   * Check if the user is running an installed app.\n   */\n\n  isNativeApp() {\n    return !this.platform.is('mobileweb') && ( this.platform.is('ios') || this.platform.is('android'));\n  }\n\n  isProduction() {\n    return environment.production;\n  }\n\n  generateIcsBlob(date) {\n    const url = this.getCurrentUrl();\n\n    const event = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:HUGatHOME\nCALSCALE:GREGORIAN\nBEGIN:VTIMEZONE\nTZID:Europe/Zurich\nTZURL:http://tzurl.org/zoneinfo-outlook/Europe/Zurich\nX-LIC-LOCATION:Europe/Zurich\nBEGIN:DAYLIGHT\nTZOFFSETFROM:+0100\nTZOFFSETTO:+0200\nTZNAME:CEST\nDTSTART:19700329T020000\nRRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=-1SU\nEND:DAYLIGHT\nBEGIN:STANDARD\nTZOFFSETFROM:+0200\nTZOFFSETTO:+0100\nTZNAME:CET\nDTSTART:19701025T030000\nRRULE:FREQ=YEARLY;BYMONTH=10;BYDAY=-1SU\nEND:STANDARD\nEND:VTIMEZONE\nBEGIN:VEVENT\nDTSTAMP:${this.datePipe.transform(new Date(), \"yyyyMMddTHHmmss\")}\nUID:${Math.random().toString(36).substr(2, 9)}\nDTSTART;TZID=Europe/Berlin:${this.datePipe.transform(date, \"yyyyMMddTHHmmss\")}\nSUMMARY:Téléconsultation\nURL:${encodeURI(url)}\nBEGIN:VALARM\nACTION:DISPLAY\nDESCRIPTION:Téléconsultation\nTRIGGER:-PT1H\nEND:VALARM\nEND:VEVENT\nEND:VCALENDAR`;\n    const blob = new Blob([event], { type: \"text/calendar\" });\n    return this.sanitizer.bypassSecurityTrustUrl(\n      window.URL.createObjectURL(blob)\n    );\n  }\n}\n","import { Component, OnInit, Input, Output, EventEmitter, Directive  } from '@angular/core';\nimport { ConfigService } from '../../config.service';\nimport {\n  UntypedFormControl, FormGroupDirective, NgForm, Validators, ValidatorFn,\n  UntypedFormBuilder, FormGroup, AbstractControl\n} from '@angular/forms';\n\nconst phoneNumberRegex = new RegExp(/^(\\+|00)[0-9 ]+$/)\n\n\n@Component({\n  selector: 'app-translator-form',\n  templateUrl: './translator-form.component.html',\n  styleUrls: ['./translator-form.component.scss']\n})\nexport class TranslatorFormComponent implements OnInit {\n\n\n  @Input() invite;\n\n  @Output() onTranslatorSubmit = new EventEmitter();\n  @Output() onTranslatorRefused = new EventEmitter();\n\n  email: string;\n  name: string;\n  direct: string;\n  myForm;\n  constructor(public configService: ConfigService,\n    private formBuilder: UntypedFormBuilder\n    ) {\n\n  }\n\n  ngOnInit() {\n    this.myForm = this.formBuilder.group({\n      emailFormControl: new UntypedFormControl('', [Validators.email]),\n      directNumberFormControl: new UntypedFormControl('', [Validators.pattern(phoneNumberRegex)] ),\n      nameFormControl: new UntypedFormControl('', [Validators.required])\n    })\n  }\n\n  onSubmit() {\n    if (!this.myForm.valid ){\n      return\n    }\n    console.log(\"Submitted \", this.email, this.name, this.direct, this.myForm)\n    const name = this.myForm.get('nameFormControl').value\n    const email = this.myForm.get('emailFormControl').value\n    const direct = this.myForm.get('directNumberFormControl').value\n    if (!email || !name || !direct) return\n    this.onTranslatorSubmit.emit({ email: email, name: name, direct: direct })\n  }\n\n  onRefused() {\n    this.onTranslatorRefused.emit(true)\n  }\n\n}\n","import { Component } from \"@angular/core\";\nimport { TranslateService } from \"@ngx-translate/core\";\n\n@Component({\n  selector: \"app-select-language\",\n  templateUrl: \"select-language.component.html\",\n  styleUrls: [\"./select-language.component.scss\"],\n})\nexport class SelectLanguageComponent {\n  opened = false;\n\n  constructor(public translate: TranslateService) {}\n\n  changeLang(event, lang) {\n    console.log(\"LANGGAGGE\", lang)\n    window.localStorage.setItem(\"hhp-lang\", lang);\n    this.translate.use(lang);\n  }\n}\n","import { GlobalVariableService } from './global-variable.service';\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TranslatorService {\n\n  constructor(\n    private http: HttpClient,\n    private globalVariableService: GlobalVariableService\n  ) { }\n\n  acceptRequest(token, translator) {\n    return this.http.post<any>(this.globalVariableService.getApiPath() + '/translator/accept/' + token, translator);\n  }\n  refuseRequest(token) {\n    return this.http.post<any>(this.globalVariableService.getApiPath() + '/translator/refuse/' + token, null);\n  }\n\n}\n"],"names":["TranslatorService","environment","InviteService","Component","NgZone","Platform","DomSanitizer","DatePipe","TranslateService","RoomService","Router","ActivatedRoute","AuthService","ConsultationService","ConfigService","SocketEventsService","App","coeff","LoginPage","constructor","authService","route","router","conServ","platform","inviteService","sanitizer","datePipe","zone","translate","translatorServ","configService","socketService","roomService","showNativeAppSuggestionAndroid","showNativeAppSuggestionIOS","connectionErrorMessage","instant","ngAfterContentInit","console","log","inviteToken","localStorage","getItem","inviteKey","ngOnInit","showNativeAppSuggestion","is","mobileLandScreen","init","subscriptions","push","currentUser","subscribe","user","currentUserValue","length","handleToken","noInviteError","noTokenProvided","logout","returnUrl","snapshot","queryParams","observeInviteToken","handleUser","consultationId","videoCallTested","handleConsultation","createConsultation","queue","gender","IMADTeam","invitationToken","toPromise","then","consultation","navigate","setItem","id","catch","err","handleTokenError","finally","submitted","loading","accept","run","getInviteFromToken","invite","handleInvite","status","lang","window","use","type","setTimeout","disconnect","acceptInvite","scheduledFor","Date","now","isScheduled","scheduledForRounded","Math","round","getTime","icsBlob","generateIcsBlob","setAllowConsultationTimer","loginWithInvite","birthDate","translator","error","onSubmit","inviteKeyError","birthError","translatorSubmit","acceptRequest","res","showTranslatorConfirmation","translationRequestRefused","removeItem","translatorAcceptError","name","translatorRefused","refuseRequest","allowConsultationTimer","loginInvite","role","ngOnDestroy","subInviteToken","unsubscribe","forEach","subscription","clearInterval","openApp","openAndroidApp","url","getCurrentUrl","location","href","host","protocol","replace","clearError","clear","closeLandingScreen","closeApp","exitApp","isMobileUser","isNativeApp","isProduction","production","date","event","transform","random","toString","substr","encodeURI","blob","Blob","bypassSecurityTrustUrl","URL","createObjectURL","providers","selector","template","_b","Object","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}