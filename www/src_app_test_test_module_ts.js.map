{"version":3,"file":"src_app_test_test_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAA2C;AACZ;AAKxB,IAAM,WAAW,GAAjB,MAAM,WAAW;IAKtB;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,yCAAO,EAAU,CAAC;IACxC,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;IAED,UAAU,CAAC,IAAY;QACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;;;AAhBU,WAAW;IAHvB,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;;GACW,WAAW;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN0C;AACD;AACD;AACsB;AAC5C;AACD;AAC+B;AAC6C;AAGrH,YAAY;AAC2C;AAET;AAEK;AACD;AAO3C,IAAM,aAAa,GAAnB,MAAM,aAAa;IAmCxB,YACU,WAAwB,EACxB,WAA4B,EAC5B,MAAc,EACf,QAAkB,EACjB,kBAAsC,EACtC,OAA4B,EAC5B,aAAkC,EAClC,WAAwB,EACxB,IAAY,EACZ,SAA2B,EAC5B,aAA4B,EAC3B,WAAwB,EACxB,MAAkB;QAZlB,gBAAW,GAAX,WAAW,CAAa;QACxB,gBAAW,GAAX,WAAW,CAAiB;QAC5B,WAAM,GAAN,MAAM,CAAQ;QACf,aAAQ,GAAR,QAAQ,CAAU;QACjB,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,YAAO,GAAP,OAAO,CAAqB;QAC5B,kBAAa,GAAb,aAAa,CAAqB;QAClC,gBAAW,GAAX,WAAW,CAAa;QACxB,SAAI,GAAJ,IAAI,CAAQ;QACZ,cAAS,GAAT,SAAS,CAAkB;QAC5B,kBAAa,GAAb,aAAa,CAAe;QAC3B,gBAAW,GAAX,WAAW,CAAa;QACxB,WAAM,GAAN,MAAM,CAAY;QA/C5B,YAAY;QACZ,wBAAmB,GAAG;YACpB,2BAA2B;YAC3B,iCAAiC;YACjC,0CAA0C;SAC3C,CAAC;QAIF,eAAU,GAAG,KAAK,CAAC;QAEnB,SAAI,GAAG,EAAE,CAAC;QAIV,eAAU,GAAG,cAAc,CAAC;QAC5B,eAAU,GAAG,qBAAqB,CAAC;QACnC,cAAS,GAAG,SAAS,CAAC;QACtB,gBAAW,GAAG,KAAK,CAAC;QACpB,aAAQ,GAAG,EAAE,CAAC;QAEd,gBAAW,GAAG,CAAC,CAAC;QAEhB,0BAAqB,GAAY,IAAI,CAAC;QACtC,gBAAW,GAAY,IAAI,CAAC;QAC5B,YAAO,GAAY,KAAK,CAAC;QAEzB,kBAAa,GAAG,EAAE,CAAC;QACnB,gBAAW,GAAG,EAAE,CAAC;QAEjB,kBAAa,GAAmB,EAAE,CAAC;QAmBjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;QACjE,2DAA2D;QAC3D,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;QAC5C,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YAC3C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC,CAAC,CACH,CAAC;IACJ,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;QAE5C,IAAI,CAAC,aAAa,CAAC,IAAI,CACrB,IAAI,CAAC,SAAS;aACX,GAAG,CAAC,sBAAsB,CAAC;aAC3B,SAAS,CAAC,CAAC,UAAkB,EAAE,EAAE;YAChC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;QACnE,CAAC,CAAC,CACL,CAAC;QACF,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;IACzD,CAAC;IAED,mBAAmB;QACjB,SAAS,CAAC,YAAY;aACnB,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;aAC1C,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC;YACjC,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;YAEpD,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC5B,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAC/B,SAAS,CAAC,YAAY;iBACnB,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;iBAC7B,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBACf,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;gBAEpD,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC,CAAC;iBACD,KAAK,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CAAC;YACnB,SAAS,CAAC,YAAY;iBACnB,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;iBAC7B,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;gBACf,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;gBAEpD,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC5B,CAAC,CAAC;iBACD,KAAK,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,SAAS;QACP,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;SAClC;QAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC;IAChC,CAAC;IAGD,mBAAmB;QACjB,+DAA+D;QAC/D,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,WAAW;QACT,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QACxC,qEAAqE;QACrE,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE,EAAE;YAC1C,YAAY,CAAC,WAAW,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,eAAe;QACb,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB;aAAM;YACL,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;IACH,CAAC;IAED,SAAS;QACP,IAAI,CAAC,WAAW;aACb,YAAY,EAAE;aACd,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE;YAC1B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;QAC/B,CAAC,CAAC;aACD,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;YACf,IAAI,KAAK,KAAK,GAAG,EAAE;gBACjB,uDAAuD;gBACvD,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB;iBAAM;gBACL,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;oBACjB,OAAO,EAAE,KAAK;oBACd,GAAG,EAAE,+BAA+B,GAAG,KAAK;iBAC7C,CAAC,CAAC;aACJ;QACH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,qBAAqB;QACnB,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,MAAM,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;QAExD,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC;QAC/C,OAAO,CAAC,GAAG,CAAC,0BAA0B,EAAE,IAAI,CAAC,CAAC;QAE9C,IAAI,WAAW,EAAE;YACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,OAAO;iBACT,kBAAkB,CAAC;gBAClB,KAAK,EAAE,SAAS;gBAChB,MAAM,EAAE,SAAS;gBACjB,QAAQ,EAAE,MAAM;gBAChB,eAAe,EAAE,WAAW;aAC7B,CAAC;iBACD,SAAS,EAAE;iBACX,IAAI,CAAC,CAAC,YAAY,EAAE,EAAE;gBACrB,IAAI,CAAC,YAAY,EAAE;oBACjB,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC;iBACrD;gBAED,YAAY,CAAC,OAAO,CAAC,qBAAqB,EAAE,YAAY,CAAC,EAAE,CAAC,CAAC;gBAC7D,0CAA0C;gBAC1C,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,EAAE,YAAY,CAAC,EAAE,CAAC,CAAC,CAAC;gBACxD,EAAE;YACJ,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;gBACb,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC,CAAC;iBACD,OAAO,CAAC,GAAG,EAAE;gBACZ,UAAU,CAAC,GAAG,EAAE;oBACd,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACvB,CAAC,EAAE,IAAI,CAAC,CAAC;YACX,CAAC,CAAC,CAAC;YACL,mBAAmB;YACnB,sCAAsC;YACtC,iBAAiB;YACjB,sBAAsB;YACtB,mBAAmB;YACnB,8BAA8B;YAC9B,4BAA4B;YAC5B,6BAA6B;YAC7B,4BAA4B;YAC5B,wCAAwC;YACxC,WAAW;YACX,qBAAqB;YACrB,kCAAkC;YAClC,uEAAuE;YACvE,kEAAkE;YAClE,aAAa;YACb,WAAW;YACX,0BAA0B;YAC1B,2BAA2B;YAC3B,WAAW;YACX,OAAO;YACP,sBAAsB;YACtB,uBAAuB;YACvB,2BAA2B;YAC3B,OAAO;YACP,qBAAqB;YACrB,yBAAyB;YACzB,6BAA6B;YAC7B,eAAe;YACf,OAAO;SACR;IACH,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YACnD,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE;gBACjB,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;YAC1C,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QACH,6BAA6B;QAC7B,oDAAoD;QACpD,uDAAuD;QACvD,+BAA+B;QAC/B,IAAI;QAEJ,0CAA0C;QAC1C,qCAAqC;QACrC,uBAAuB;QACvB,wBAAwB;QACxB,yBAAyB;QACzB,KAAK;QACL,2BAA2B;QAC3B,sCAAsC;QACtC,0EAA0E;QAC1E,sDAAsD;QACtD,SAAS;QACT,OAAO;QACP,wBAAwB;QACxB,2BAA2B;QAC3B,OAAO;IACT,CAAC;IAED,WAAW,CAAC,KAAa;QACvB,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,GAAG,EAAE,+BAA+B;SACrC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;YACpB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,IAAI;YACf,KAAK,EAAE,KAAK;SACb,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,EAAE;YACnD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,sBAAsB,EAAE,CAAC,CAAC;YACnE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;YAC5C,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;YAC7D,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;YAC5B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;YACpE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QAEH,sBAAsB;QACtB,oBAAoB;QACpB,kBAAkB;QAClB,2BAA2B;QAC3B,OAAO;QACP,wBAAwB;QACxB,2BAA2B;QAC3B,wBAAwB;QACxB,sDAAsD;QACtD,SAAS;QACT,OAAO;IACT,CAAC;IACD,gBAAgB,CAAC,KAAa;QAC5B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QAEnB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,OAAO,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACxC,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QACpC,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;QAC7D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAElC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE;YAC7D,IAAI,CAAC,uBAAuB,EAAE;iBAC3B,IAAI,CAAC,GAAG,EAAE;gBACT,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;gBAChC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC1B,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;gBACb,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACrB,CAAC,CAAC,CAAC;SACN;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SACzB;IACH,CAAC;IAED,aAAa;QACX,sEAAsE;QAEtE,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;QACvC,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC;QAC9B,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,6BAA6B;QAE7B,iDAAiD;QACjD,sBAAsB;QACtB,MAAM;QACN,0BAA0B;QAC1B,0BAA0B;QAC1B,6BAA6B;QAC7B,OAAO;QACP,aAAa;QACb,iBAAiB;QACjB,yBAAyB;QACzB,QAAQ;QACR,OAAO;QACP,IAAI;QAEJ,8CAA8C;QAC9C,sCAAsC;QACtC,yBAAyB;QACzB,qBAAqB;QACrB,4CAA4C;QAC5C,OAAO;QACP,KAAK;QAEL,6CAA6C;QAC7C,4BAA4B;QAC5B,uCAAuC;QACvC,yBAAyB;QACzB,sBAAsB;QACtB,4CAA4C;QAC5C,OAAO;QAEP,yBAAyB;QACzB,wDAAwD;QACxD,KAAK;QAEL,yDAAyD;QACzD,4BAA4B;QAC5B,mGAAmG;QACnG,KAAK;QAEL,mDAAmD;QACnD,6FAA6F;QAC7F,KAAK;QAEL,mDAAmD;QACnD,oGAAoG;QACpG,8CAA8C;QAC9C,iEAAiE;QACjE,gCAAgC;QAChC,yBAAyB;QACzB,qDAAqD;QACrD,6BAA6B;QAC7B,KAAK;QAEL,uBAAuB;QACvB,mBAAmB;QACnB,sDAAsD;QACtD,KAAK;QAEL,gCAAgC;QAChC,sCAAsC;QACtC,4BAA4B;QAC5B,wCAAwC;QACxC,2BAA2B;IAC7B,CAAC;IAED,YAAY;QACV,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;QAEnD,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;SACrB;QACD,IAAI,CAAC,UAAU,GAAG,cAAc,CAAC;QACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,sBAAsB,CAAC,CAAC;QACjE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;QAEnB,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC,OAAO,CAAC,UAAU,KAAK;gBAC9D,KAAK,CAAC,IAAI,EAAE,CAAC;YACf,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;SACzB;QACD,YAAY,CAAC,OAAO,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;IAClD,CAAC;IAED,cAAc;QACZ,IAAI;YACF,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,SAAS;oBAC5C,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,YAAY,CAAC;aACrD;SACF;QAAC,OAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;SAC5C;IACH,CAAC;IAED,gBAAgB;QACd,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAE9C,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAEO,uBAAuB;QAC7B,OAAO,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;QAC9C,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACrC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;gBAC9B,IAAI,CAAC,kBAAkB;qBACpB,kBAAkB,CAAC,IAAI,CAAC,mBAAmB,CAAC;qBAC5C,IAAI,CAAC,GAAG,EAAE;oBACT,IAAI,CAAC,kBAAkB;yBACpB,eAAe,CAAC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,MAAM,CAAC;yBAC1D,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;wBACf,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,MAAM,CAAC,CAAC;wBAC1C,IAAI,CAAC,kBAAkB;6BACpB,eAAe,CACd,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,YAAY,CAChD;6BACA,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;4BACd,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;4BACxC,IAAI,CAAC,kBAAkB;iCACpB,eAAe,CACd,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,qBAAqB,CACzD;iCACA,IAAI,CAAC,CAAC,WAAW,EAAE,EAAE;gCACpB,OAAO,CAAC,GAAG,CACT,gCAAgC,EAChC,MAAM,CAAC,aAAa,EACpB,KAAK,CAAC,aAAa,EACnB,WAAW,CAAC,aAAa,CAC1B,CAAC;gCACF,IACE,MAAM,CAAC,aAAa;oCACpB,KAAK,CAAC,aAAa;oCACnB,WAAW,CAAC,aAAa,EACzB;oCACA,OAAO,CAAC,IAAI,CAAC,CAAC;iCACf;qCAAM;oCACL,MAAM,CACJ,IAAI,KAAK,CACP,sBAAsB;wCACpB,IAAI;wCACJ,YAAY;wCACZ,MAAM,CAAC,aAAa;wCACpB,IAAI;wCACJ,WAAW;wCACX,KAAK,CAAC,aAAa;wCACnB,IAAI;wCACJ,oBAAoB;wCACpB,WAAW,CAAC,aAAa,CAC5B,CACF,CAAC;iCACH;4BACH,CAAC,CAAC;iCACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;gCACb,OAAO,CAAC,KAAK,CACX,sBAAsB;oCACpB,IAAI,CAAC,kBAAkB,CAAC,UAAU;yCAC/B,qBAAqB;oCACxB,SAAS,CACZ,CAAC;gCACF,MAAM,CAAC,GAAG,CAAC,CAAC;4BACd,CAAC,CAAC,CAAC;wBACP,CAAC,CAAC;6BACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;4BACb,OAAO,CAAC,KAAK,CACX,sBAAsB;gCACpB,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,YAAY;gCAC/C,SAAS,CACZ,CAAC;4BACF,MAAM,CAAC,GAAG,CAAC,CAAC;wBACd,CAAC,CAAC,CAAC;oBACP,CAAC,CAAC;yBACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;wBACb,OAAO,CAAC,KAAK,CACX,sBAAsB;4BACpB,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,MAAM;4BACzC,SAAS,CACZ,CAAC;wBACF,MAAM,CAAC,GAAG,CAAC,CAAC;oBACd,CAAC,CAAC,CAAC;gBACP,CAAC,CAAC;qBACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC,CAAC;YAC1E,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;;;;;;;;;;;;;;;;;;gCAxfA,qDAAS,SAAC,UAAU;kCAyGpB,wDAAY,SAAC,qBAAqB;;AAlHxB,aAAa;IALzB,yDAAS,CAAC;QACT,QAAQ,EAAE,eAAe;QACzB,sEAAoC;;KAErC,CAAC;yDAqCuB,sDAAW,oBAAX,sDAAW,oDACX,8EAAe,oBAAf,8EAAe,oDACpB,mDAAM,oBAAN,mDAAM,oDACL,qDAAQ,oBAAR,qDAAQ,oDACG,gGAAkB,oBAAlB,gGAAkB,oDAC7B,sEAAmB,oBAAnB,sEAAmB,oDACb,uEAAmB,oBAAnB,uEAAmB,oDACrB,2DAAW,oBAAX,2DAAW,oDAClB,kDAAM,oBAAN,kDAAM,oDACD,kEAAgB,oBAAhB,kEAAgB,oDACb,0DAAa,oBAAb,0DAAa,oDACd,yDAAW,oBAAX,yDAAW,oDAChB,uDAAU,oBAAV,uDAAU;GAhDjB,aAAa;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvB+B;AACZ;AACA;AACI;AACR;AACM;AAEQ;AAEvD,YAAY;AACqC;AAEjD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,0DAAa;KACzB;CACF,CAAC;AAcK,IAAM,UAAU,GAAhB,MAAM,UAAU;;AAAV,UAAU;IAZtB,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,yDAAY;YACZ,kEAAqB,CAAC,MAAM,CAAC;YAC7B,yDAAU;YACV,+DAAY;SACb;QACD,YAAY,EAAE,CAAC,0DAAa,CAAC;KAC9B,CAAC;GACW,UAAU;AAAA","sources":["./src/app/info.service.ts","./src/app/test/test.component.ts","./src/app/test/test.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class InfoService {\n\n  info: string;\n  newInfo$: Subject<string>;\n\n  constructor() {\n    this.newInfo$ = new Subject<string>();\n  }\n\n  getInfo() {\n    return this.info;\n  }\n\n  updateInfo(info: string) {\n    this.info = info;\n    this.newInfo$.next(info);\n  }\n\n}\n","import { RoomService, LogService, Stream } from \"hug-angular-lib\";\nimport { SocketEventsService } from \"./../socket-events.service\";\nimport { ConsultationService } from \"./../consultation.service\";\nimport { AndroidPermissions } from \"@awesome-cordova-plugins/android-permissions/ngx\";\nimport { Platform } from \"@ionic/angular\";\nimport { Router } from \"@angular/router\";\nimport { OpenViduService } from \"./../shared/services/openvidu.service\";\nimport { Component, OnInit, ViewChild, ElementRef, HostListener, OnDestroy, NgZone, Directive } from \"@angular/core\";\n\nimport { Subscription } from \"rxjs\";\n// translate\nimport { TranslateService } from \"@ngx-translate/core\";\n\nimport { InfoService } from \"../info.service\";\n\nimport { AuthService } from \"../auth/auth.service\";\nimport { ConfigService } from \"../config.service\";\n\n@Component({\n  selector: \"app-test-call\",\n  templateUrl: \"./test.component.html\",\n  styleUrls: [\"./test.component.scss\"],\n})\nexport class TestComponent implements OnInit, OnDestroy {\n  // Constants\n  ANDROID_PERMISSIONS = [\n    \"android.permission.CAMERA\",\n    \"android.permission.RECORD_AUDIO\",\n    \"android.permission.MODIFY_AUDIO_SETTINGS\",\n  ];\n  websocket: WebSocket;\n\n  @ViewChild(\"scrollMe\") private myScrollContainer: ElementRef;\n  lockScroll = false;\n\n  info = [];\n\n  session;\n\n  testStatus = \"DISCONNECTED\";\n  testButton = \"Tester mon matériel\";\n  tickClass = \"trigger\";\n  showSpinner = false;\n  msgChain = [];\n\n  volumeLevel = 0;\n\n  accessHardwareGranted: Boolean = null;\n  testStarted: Boolean = null;\n  loading: Boolean = false;\n\n  globalMessage = \"\";\n  inviteToken = \"\";\n\n  subscriptions: Subscription[] = [];\n  peerId;\n  myCamStream: Stream;\n\n  constructor(\n    private infoService: InfoService,\n    private openviduSev: OpenViduService,\n    private router: Router,\n    public platform: Platform,\n    private androidPermissions: AndroidPermissions,\n    private conServ: ConsultationService,\n    private socketService: SocketEventsService,\n    private authService: AuthService,\n    private zone: NgZone,\n    private translate: TranslateService,\n    public configService: ConfigService,\n    private roomService: RoomService,\n    private logger: LogService\n  ) {\n    this.testButton = this.translate.instant(\"test.testMyEquipment\");\n    // Subscription to info updated event raised by InfoService\n    console.log(\"testButton \", this.testButton);\n    this.subscriptions.push(\n      this.infoService.newInfo$.subscribe((info) => {\n        this.info.push(info);\n        this.scrollToBottom();\n      })\n    );\n  }\n\n  ngOnInit() {\n    this.logger.debug(\"Test component on init\");\n\n    this.subscriptions.push(\n      this.translate\n        .get(\"test.testMyEquipment\")\n        .subscribe((translated: string) => {\n          this.testButton = this.translate.instant(\"test.testMyEquipment\");\n        })\n    );\n    this.inviteToken = localStorage.getItem(\"inviteToken\");\n  }\n\n  initHardwareDevices() {\n    navigator.mediaDevices\n      .getUserMedia({ audio: true, video: true })\n      .then((stream) => {\n        console.log(\"Got stren\", stream);\n        stream.getTracks().forEach((track) => track.stop());\n\n        this.initAudioPublisher();\n      })\n      .catch((error) => {\n        console.log(\"EROOOOOR\", error);\n        navigator.mediaDevices\n          .getUserMedia({ video: true })\n          .then((stream) => {\n            stream.getTracks().forEach((track) => track.stop());\n\n            this.initAudioPublisher();\n          })\n          .catch(() => {});\n        navigator.mediaDevices\n          .getUserMedia({ audio: true })\n          .then((stream) => {\n            stream.getTracks().forEach((track) => track.stop());\n\n            this.initAudioPublisher();\n          })\n          .catch(() => {});\n      });\n  }\n\n  startTest() {\n    if (this.testStarted) {\n      this.globalMessage = \"\";\n      this.testStatus = \"DISCONNECTED\";\n    }\n\n    this.showSpinner = true;\n    return this.toggleTestVideo();\n  }\n\n  @HostListener(\"window:beforeunload\")\n  beforeunloadHandler() {\n    // On window closed leave test session and close info websocket\n    this.endTestVideo();\n  }\n\n  ngOnDestroy() {\n    console.log(\"ng on destroy ..........\");\n    // On component destroyed leave test session and close info websocket\n    this.endTestVideo();\n\n    this.subscriptions.forEach((subscription) => {\n      subscription.unsubscribe();\n    });\n  }\n\n  toggleTestVideo() {\n    this.testStarted = !this.testStarted;\n    if (!this.session) {\n      this.testVideo();\n    } else {\n      this.endTestVideo();\n    }\n  }\n\n  testVideo() {\n    this.openviduSev\n      .getTestToken()\n      .then(({ token, peerId }) => {\n        this.peerId = peerId;\n        this.connectToSession(token);\n      })\n      .catch((error) => {\n        if (error === 401) {\n          // User unauthorized error. OpenVidu security is active\n          this.testVideo();\n        } else {\n          console.error(error);\n          this.msgChain.push({\n            success: false,\n            msg: \"Error connecting to session: \" + error,\n          });\n        }\n      });\n  }\n\n  proceedToConsultation() {\n    this.endTestVideo();\n    const inviteToken = localStorage.getItem(\"inviteToken\");\n\n    const user = this.authService.currentUserValue;\n    console.log(\"proceed to consultation \", user);\n\n    if (inviteToken) {\n      this.loading = true;\n      this.conServ\n        .createConsultation({\n          queue: \"covid19\",\n          gender: \"unknown\",\n          IMADTeam: \"none\",\n          invitationToken: inviteToken,\n        })\n        .toPromise()\n        .then((consultation) => {\n          if (!consultation) {\n            return this.router.navigate([\"await-consultation\"]);\n          }\n\n          localStorage.setItem(\"currentConsultation\", consultation.id);\n          // localStorage.removeItem('inviteToken');\n          this.router.navigate([\"consultation\", consultation.id]);\n          //\n        })\n        .catch((err) => {\n          console.log(err);\n        })\n        .finally(() => {\n          setTimeout(() => {\n            this.loading = false;\n          }, 2000);\n        });\n      // this.authService\n      //   .loginWithInvite(inviteToken, '')\n      //   .toPromise()\n      //   .then((user) => {\n      //     this.conServ\n      //       .createConsultation({\n      //         queue: 'covid19',\n      //         gender: 'unknown',\n      //         IMADTeam: 'none',\n      //         invitationToken: inviteToken,\n      //       })\n      //       .toPromise()\n      //       .then((consultation) => {\n      //         localStorage.setItem('currentConsultation', consultation.id)\n      //         this.router.navigate(['consultation', consultation.id])\n      //         //\n      //       })\n      //       .catch((err) => {\n      //         console.log(err)\n      //       })\n      //   })\n      //   .catch((err) => {\n      //     console.log(err)\n      //     this.loading = false\n      //   })\n      //   .finally(() => {\n      //     setTimeout(() => {\n      //       this.loading = false\n      //     }, 2000)\n      //   })\n    }\n  }\n\n  initAudioPublisher() {\n    this.roomService.onVolumeChange.subscribe((change) => {\n      this.zone.run(() => {\n        this.volumeLevel = change.volume * 1000;\n      });\n    });\n    // if (this.audioPublisher) {\n    //   this.audioPublisher.stream.disposeMediaStream()\n    //   this.audioPublisher.off('streamAudioVolumeChange')\n    //   this.audioPublisher = null\n    // }\n\n    // this.OV.initPublisherAsync(undefined, {\n    //   audioSource: this.audioDeviceId,\n    //   videoSource: null,\n    //   publishAudio: true,\n    //   publishVideo: false,\n    // })\n    //   .then((publisher) => {\n    //     this.audioPublisher = publisher\n    //     this.audioPublisher.on('streamAudioVolumeChange', (event: any) => {\n    //       this.volumeLevel = event.value.newValue + 100\n    //     })\n    //   })\n    //   .catch((error) => {\n    //     console.error(error)\n    //   })\n  }\n\n  initSession(token: string) {\n    this.accessHardwareGranted = true;\n    this.session = true;\n    this.roomService.init({ peerId: this.peerId });\n    this.msgChain.push({\n      success: true,\n      msg: \"Accès au micro et à la caméra\",\n    });\n    this.roomService.join({\n      roomId: this.peerId,\n      joinVideo: true,\n      joinAudio: true,\n      token: token,\n    });\n\n    this.roomService.onCamProducing.subscribe((stream) => {\n      this.msgChain.push({ success: true, msg: \"Connected to session\" });\n      this.logger.debug(\"Cam producing \", stream);\n      this.myCamStream = stream;\n      this.testButton = this.translate.instant(\"test.stopTheTest\");\n      this.testStatus = \"PLAYING\";\n      this.globalMessage = this.translate.instant(\"test.yourDeviceSeems\");\n      this.showSpinner = false;\n      this.connectWebCam();\n    });\n\n    // return this.session\n    //   .connect(token)\n    //   .then(() => {\n    //     this.connectWebCam()\n    //   })\n    //   .catch((error) => {\n    //     this.msgChain.push({\n    //       success: false,\n    //       msg: 'Error connecting to session: ' + error,\n    //     })\n    //   })\n  }\n  connectToSession(token: string) {\n    this.msgChain = [];\n\n    this.session = true;\n    console.log(\"OV session\", this.session);\n    console.log(\"Session token\", token);\n    this.testStatus = \"CONNECTING\";\n    this.testButton = this.translate.instant(\"test.stopTheTest\");\n    this.accessHardwareGranted = null;\n\n    if (this.platform.is(\"android\") && this.platform.is(\"hybrid\")) {\n      this.checkAndroidPermissions()\n        .then(() => {\n          console.log(\"Permissions ok !\");\n          this.initSession(token);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    } else {\n      this.initSession(token);\n    }\n  }\n\n  connectWebCam() {\n    // this.msgChain.push({ success: true, msg: 'Connected to session' });\n\n    console.log(\"Start connection webcam\");\n    this.testStatus = \"CONNECTED\";\n    this.initAudioPublisher();\n    // this.initHardwareDevices()\n\n    // const publisherRemote = this.OV.initPublisher(\n    //   'mirrored-video',\n    //   {\n    //     publishAudio: true,\n    //     publishVideo: true,\n    //     resolution: '640x480',\n    //   },\n    //   (e) => {\n    //     if (!!e) {\n    //       console.error(e)\n    //     }\n    //   },\n    // )\n\n    // publisherRemote.on('accessAllowed', () => {\n    //   this.accessHardwareGranted = true\n    //   this.msgChain.push({\n    //     success: true,\n    //     msg: 'Accès au micro et à la caméra',\n    //   })\n    // })\n\n    // publisherRemote.on('accessDenied', () => {\n    //   // this.endTestVideo();\n    //   this.accessHardwareGranted = false\n    //   this.msgChain.push({\n    //     success: false,\n    //     msg: 'Accès au micro et à la caméra',\n    //   })\n\n    //   this.globalMessage =\n    //     this.translate.instant('test.yourDeviceAppears');\n    // })\n\n    // publisherRemote.on('videoElementCreated', (video) => {\n    //   this.showSpinner = true\n    //   this.msgChain.push({ success: true, msg: this.translate.instant('test.videoElementCreated') })\n    // })\n\n    // publisherRemote.on('streamCreated', (video) => {\n    //   this.msgChain.push({ success: true, msg: this.translate.instant('test.streamCreated') })\n    // })\n\n    // publisherRemote.on('streamPlaying', (video) => {\n    //   this.msgChain.push({ success: true, msg: this.translate.instant('test.connectionWithServer') })\n    //   console.log('mesgchaing ', this.msgChain)\n    //   this.testButton = this.translate.instant('test.stopTheTest')\n    //   this.testStatus = 'PLAYING'\n    //   this.globalMessage =\n    //     this.translate.instant('test.yourDeviceSeems')\n    //   this.showSpinner = false\n    // })\n\n    // this.msgChain.push({\n    //   success: true,\n    //   msg: this.translate.instant('test.testStarting'),\n    // })\n\n    // console.log('Will subscribe')\n    // publisherRemote.subscribeToRemote()\n    // console.log('subscribed')\n    // this.session.publish(publisherRemote)\n    // console.log('published')\n  }\n\n  endTestVideo() {\n    console.log(\"End TEST>>>>>>>>>>>>>>>>>>>>>>>>>>>\");\n\n    if (this.session) {\n      this.roomService.close();\n      this.session = null;\n    }\n    this.testStatus = \"DISCONNECTED\";\n    this.testButton = this.translate.instant(\"test.testMyEquipment\");\n    this.showSpinner = false;\n    this.info = [];\n    this.msgChain = [];\n\n    if (this.myCamStream) {\n      this.myCamStream.mediaStream.getTracks().forEach(function (track) {\n        track.stop();\n      });\n      this.myCamStream = null;\n    }\n    localStorage.setItem(\"videoCallTested\", \"true\");\n  }\n\n  scrollToBottom(): void {\n    try {\n      if (!this.lockScroll) {\n        this.myScrollContainer.nativeElement.scrollTop =\n          this.myScrollContainer.nativeElement.scrollHeight;\n      }\n    } catch (err) {\n      console.error(\"[Error]:\" + err.toString());\n    }\n  }\n\n  ionViewWillLeave() {\n    console.log(\"ion view will leave ..........\");\n\n    this.endTestVideo();\n  }\n\n  private checkAndroidPermissions(): Promise<any> {\n    console.log(\"Requesting Android Permissions\");\n    return new Promise((resolve, reject) => {\n      this.platform.ready().then(() => {\n        this.androidPermissions\n          .requestPermissions(this.ANDROID_PERMISSIONS)\n          .then(() => {\n            this.androidPermissions\n              .checkPermission(this.androidPermissions.PERMISSION.CAMERA)\n              .then((camera) => {\n                console.log(\"permissions camera\", camera);\n                this.androidPermissions\n                  .checkPermission(\n                    this.androidPermissions.PERMISSION.RECORD_AUDIO\n                  )\n                  .then((audio) => {\n                    console.log(\"permissions audio\", audio);\n                    this.androidPermissions\n                      .checkPermission(\n                        this.androidPermissions.PERMISSION.MODIFY_AUDIO_SETTINGS\n                      )\n                      .then((modifyAudio) => {\n                        console.log(\n                          \"check permission final request\",\n                          camera.hasPermission,\n                          audio.hasPermission,\n                          modifyAudio.hasPermission\n                        );\n                        if (\n                          camera.hasPermission &&\n                          audio.hasPermission &&\n                          modifyAudio.hasPermission\n                        ) {\n                          resolve(null);\n                        } else {\n                          reject(\n                            new Error(\n                              \"Permissions denied: \" +\n                                \"\\n\" +\n                                \" CAMERA = \" +\n                                camera.hasPermission +\n                                \"\\n\" +\n                                \" AUDIO = \" +\n                                audio.hasPermission +\n                                \"\\n\" +\n                                \" AUDIO_SETTINGS = \" +\n                                modifyAudio.hasPermission\n                            )\n                          );\n                        }\n                      })\n                      .catch((err) => {\n                        console.error(\n                          \"Checking permission \" +\n                            this.androidPermissions.PERMISSION\n                              .MODIFY_AUDIO_SETTINGS +\n                            \" failed\"\n                        );\n                        reject(err);\n                      });\n                  })\n                  .catch((err) => {\n                    console.error(\n                      \"Checking permission \" +\n                        this.androidPermissions.PERMISSION.RECORD_AUDIO +\n                        \" failed\"\n                    );\n                    reject(err);\n                  });\n              })\n              .catch((err) => {\n                console.error(\n                  \"Checking permission \" +\n                    this.androidPermissions.PERMISSION.CAMERA +\n                    \" failed\"\n                );\n                reject(err);\n              });\n          })\n          .catch((err) => console.error(\"Error requesting permissions: \", err));\n      });\n    });\n  }\n}\n","import { SharedModule } from './../shared/shared.module';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { TestComponent } from './test.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { Routes, RouterModule } from '@angular/router';\n\n// translate\nimport { I18nModule } from '../i18n/i18n.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TestComponent\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CommonModule,\n    RouterModule.forChild(routes),\n    I18nModule,\n    SharedModule\n  ],\n  declarations: [TestComponent]\n})\nexport class TestModule { }\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}